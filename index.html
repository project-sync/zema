<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZemaSync - Bridge the Gap Between Dermatology and Mental Health</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/htmx.org@1.9.6"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Global Reset */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        /* Body Styling */
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.5;
            color: #333;
            overflow-x: hidden;
        }

        /* Main Container */
        .demo-container {
            max-width: 1400px;
            width: 100%; /* Ensure it takes full width on smaller screens */
            margin: 0 auto;
            padding: 20px;
            padding-top: 80px; /* Adjust for fixed navbar */
        }

        /* Header Styling (for platform interface) */
        .demo-header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .demo-header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            color: #764ba2; /* Mor renk */
        }

        .demo-header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        /* Platform Interface */
        .platform-interface {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.2);
            overflow: hidden;
            margin-bottom: 20px;
            display: none; /* Hidden by default, shown after login */
        }

        /* Navigation Bar (for platform interface) */
        .nav-bar {
            background: #2d3436;
            color: white;
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap; /* Allow items to wrap on smaller screens */
            border-top-left-radius: 20px;
            border-top-right-radius: 20px;
        }

        .nav-brand {
            font-size: 1.4rem;
            font-weight: bold;
            color: #74b9ff;
            margin-right: 20px;
        }

        .nav-menu {
            display: flex;
            gap: 10px; /* Reduced gap for more items */
            flex-wrap: wrap;
            flex-grow: 1; /* Allow menu to take available space */
            justify-content: flex-start;
        }

        .nav-item {
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: transparent;
            border: none;
            color: white;
            font-size: 0.95rem;
        }

        .nav-item:hover, .nav-item.active {
            background: #74b9ff;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }

        /* Main Content Area */
        .main-content {
            display: flex;
            min-height: 600px;
        }

        /* Sidebar */
        .sidebar {
            width: 280px;
            background: #f8f9fa;
            padding: 20px;
            border-right: 1px solid #e9ecef;
            flex-shrink: 0; /* Prevent sidebar from shrinking */
        }

        .patient-list {
            margin-bottom: 20px;
        }

        .patient-item {
            background: white;
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .patient-item:hover, .patient-item.active {
            border-color: #667eea;
            transform: translateY(-2px);
        }

        .patient-name {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .patient-status {
            font-size: 0.85rem;
            color: #666;
        }

        .content-area {
            flex: 1;
            padding: 30px;
        }

        /* Dashboard Cards */
        .dashboard-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .card {
            background: white;
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.1);
            border: 1px solid #e9ecef;
            animation: fadeInUp 0.6s ease-out; /* Animation for cards */
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .card-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: #2d3436;
        }

        .status-indicator {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-high {
            background: #ff7675;
            color: white;
        }

        .status-moderate {
            background: #fdcb6e;
            color: #2d3436;
        }

        .status-low {
            background: #00b894;
            color: white;
        }

        .metric-display {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .metric-value {
            font-size: 2rem;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 5px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 1s ease;
        }

        /* AI Insights Section */
        .ai-insights {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 16px;
            padding: 25px;
            margin-bottom: 20px;
        }

        .ai-insights h3 {
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .recommendation {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 15px;
        }

        .recommendation:last-child {
            margin-bottom: 0;
        }

        .recommendation-title {
            font-weight: 600;
            margin-bottom: 8px;
        }

        /* Chart Container */
        .chart-container {
            height: 300px;
            background: #f8f9fa;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 15px;
            position: relative;
            overflow: hidden;
        }

        .chart-placeholder {
            text-align: center;
            color: #666;
        }

        /* Correlation Matrix */
        .correlation-matrix {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }

        .correlation-cell {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .correlation-cell:hover {
            background: #e9ecef;
            transform: scale(1.05);
        }

        .correlation-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 5px;
        }

        .correlation-label {
            font-size: 0.8rem;
            color: #666;
        }

        /* Action Buttons */
        .btn {
            padding: 12px 24px;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-secondary {
            background: transparent;
            color: #667eea;
            border: 2px solid #667eea;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.2);
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Login Section */
        .login-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.2);
            padding: 40px;
            text-align: center;
            max-width: 400px;
            width: 90%;
            display: block; /* Shown by default */
        }

        .login-container h2 {
            margin-bottom: 25px;
            color: #2d3436;
        }

        .login-container input, .login-container select {
            width: calc(100% - 20px);
            padding: 12px;
            margin-bottom: 15px;
            border: 1px solid #ced4da;
            border-radius: 8px;
            font-size: 1rem;
        }

        .login-container button {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 8px;
            background: #667eea;
            color: white;
            font-size: 1.1rem;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .login-container button:hover {
            background: #5a6cdb;
        }

        /* View Content Management */
        .view-content {
            display: none; /* Hide all views by default */
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                border-right: none;
                border-bottom: 1px solid #e9ecef;
            }
            
            .dashboard-cards {
                grid-template-columns: 1fr;
            }

            .nav-bar {
                flex-direction: column;
                align-items: flex-start;
            }

            .nav-menu {
                width: 100%;
                justify-content: center;
                margin-top: 15px;
            }

            .nav-item {
                width: 100%;
                text-align: center;
            }
            .demo-container {
                padding-top: 100px; /* More padding for smaller screens if navbar wraps */
            }
        }

        /* Custom Modal for Alerts */
        .modal {
            position: fixed;
            z-index: 10000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.4);
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }

        .modal.show {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background-color: #fefefe;
            margin: auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 400px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            text-align: center;
            position: relative;
            transform: translateY(-20px);
            transition: transform 0.3s ease;
        }

        .modal.show .modal-content {
            transform: translateY(0);
        }

        .modal-close-button {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            position: absolute;
            top: 10px;
            right: 15px;
            cursor: pointer;
        }

        .modal-close-button:hover,
        .modal-close-button:focus {
            color: #000;
            text-decoration: none;
            cursor: pointer;
        }

        .modal-message {
            margin-bottom: 20px;
            font-size: 1.1rem;
            color: #333;
        }

        .modal-ok-button {
            background-color: #667eea;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1rem;
            transition: background-color 0.3s ease;
        }

        .modal-ok-button:hover {
            background-color: #764ba2;
        }

        /* Floating Notification */
        .floating-notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #00b894;
            color: white;
            padding: 15px 20px;
            border-radius: 12px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.2);
            transform: translateX(400px);
            transition: transform 0.5s ease;
            z-index: 1000;
        }

        .floating-notification.show {
            transform: translateX(0);
        }

        /* Landing Page Specific Styles (from landing.html) */
        .landing-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 0.75rem 0;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            backdrop-filter: blur(10px);
            border-bottom-left-radius: 15px; /* Rounded corners */
            border-bottom-right-radius: 15px; /* Rounded corners */
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* Subtle shadow */
        }
        
        .landing-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .landing-logo-text {
            color: #f7f5fa; /* Adjusted for better contrast on gradient */
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        .landing-nav-links {
            display: flex;
            list-style: none;
            gap: 1.5rem;
        }
        
        .landing-nav-links a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            font-size: 0.9rem;
            transition: opacity 0.3s ease;
        }
        
        .landing-nav-links a:hover {
            opacity: 0.8;
        }
        
        .landing-cta-button {
            background: white;
            color: #764ba2;
            padding: 8px 16px;
            border-radius: 20px;
            text-decoration: none;
            font-weight: 600;
            font-size: 0.9rem;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1); /* Subtle shadow */
        }
        
        .landing-cta-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.2);
        }
        
        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 90px 0 50px;
            text-align: center;
            position: relative;
            overflow: hidden;
            border-bottom-left-radius: 25px; /* Rounded corners */
            border-bottom-right-radius: 25px; /* Rounded corners */
        }
        
        .hero::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -20%;
            width: 100%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            transform: rotate(45deg);
        }
        
        .hero-content {
            position: relative;
            z-index: 2;
        }
        
        .hero-logo {
            margin: 0 auto 1.5rem;
            display: inline-block;
            background: white;
            padding: 1.5rem;
            border-radius: 2rem;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }
        
        .hero h1 {
            font-size: 2.8rem;
            margin-bottom: 0.75rem;
            font-weight: 700;
        }
        
        .hero .tagline {
            font-size: 1.3rem;
            margin-bottom: 1rem;
            opacity: 0.9;
            font-weight: 400;
        }
        
        .hero .description {
            font-size: 1.1rem;
            margin-bottom: 2rem;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            opacity: 0.8;
        }
        
        .hero-buttons {
            display: flex;
            gap: 0.75rem;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .btn-primary-landing { /* Renamed to avoid conflict */
            background: white;
            color: #764ba2;
            padding: 12px 24px;
            border-radius: 25px;
            text-decoration: none;
            font-weight: 600;
            font-size: 1rem;
            transition: all 0.3s ease;
            box-shadow: 0 8px 24px rgba(0,0,0,0.2);
        }
        
        .btn-primary-landing:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 32px rgba(0,0,0,0.3);
        }
        
        .btn-secondary-landing { /* Renamed to avoid conflict */
            background: transparent;
            color: white;
            border: 2px solid white;
            padding: 10px 22px;
            border-radius: 25px;
            text-decoration: none;
            font-weight: 600;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        .btn-secondary-landing:hover {
            background: white;
            color: #764ba2;
        }
        
        /* Features Section */
        .features {
            padding: 50px 0;
            background: #f8f9fa;
        }
        
        .section-title {
            text-align: center;
            font-size: 2.2rem;
            margin-bottom: 2rem;
            color: #2d3436;
        }
        
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); /* Default for small screens */
            gap: 1.5rem;
            margin-top: 2rem;
        }

        @media (min-width: 768px) { /* Medium screens and up */
            .features-grid {
                grid-template-columns: repeat(2, 1fr); /* 2 columns */
            }
        }

        @media (min-width: 1024px) { /* Large screens and up */
            .features-grid {
                grid-template-columns: repeat(3, 1fr); /* 3 columns */
            }
        }
        
        .feature-card {
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.1);
            text-align: center;
            transition: transform 0.3s ease;
        }
        
        .feature-card:hover {
            transform: translateY(-8px);
        }
        
        .feature-icon {
            font-size: 2.5rem;
            margin-bottom: 0.75rem;
        }
        
        .feature-card h3 {
            font-size: 1.3rem;
            margin-bottom: 0.75rem;
            color: #2d3436;
        }
        
        .feature-card p {
            color: #636e72;
            line-height: 1.5;
            font-size: 0.95rem;
        }
        
        /* Pricing Section */
        .pricing {
            padding: 50px 0;
            background: white;
        }
        
        .pricing-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }
        
        .pricing-card {
            background: white;
            border-radius: 16px;
            padding: 1.5rem;
            box-shadow: 0 12px 32px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
            border: 2px solid transparent;
        }
        
        .pricing-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 48px rgba(0,0,0,0.15);
        }
        
        .pricing-card.featured {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            transform: scale(1.02);
            border: 2px solid #764ba2;
        }
        
        .pricing-card.custom {
            background: linear-gradient(135deg, #fd79a8 0%, #fdcb6e 100%);
            color: white;
        }
        
        .plan-name {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 0.4rem;
        }
        
        .plan-price {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 0.4rem;
        }
        
        .plan-billing {
            font-size: 0.85rem;
            opacity: 0.7;
            margin-bottom: 1.2rem;
        }
        
        .plan-features {
            list-style: none;
            margin-bottom: 1.5rem;
        }
        
        .plan-features li {
            padding: 0.4rem 0;
            position: relative;
            padding-left: 1.2rem;
            font-size: 0.9rem;
        }
        
        .plan-features li::before {
            content: "✓";
            position: absolute;
            left: 0;
            color: #00b894;
            font-weight: bold;
        }
        
        .pricing-card.featured .plan-features li::before,
        .pricing-card.custom .plan-features li::before {
            color: white;
        }
        
        .plan-button-landing { /* Renamed to avoid conflict */
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            font-size: 0.95rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }
        
        .plan-button-landing.primary {
            background: #764ba2;
            color: white;
        }
        
        .plan-button-landing.secondary {
            background: white;
            color: #764ba2;
            border: 2px solid #764ba2;
        }
        
        .plan-button-landing:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.2);
        }
        
        /* CTA Section */
        .cta-section-landing { /* Renamed to avoid conflict */
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 50px 0;
            text-align: center;
            border-radius: 25px; /* Rounded corners */
            margin: 20px auto; /* Center with margin */
            max-width: 1200px; /* Limit width */
            box-shadow: 0 10px 20px rgba(0,0,0,0.1); /* Added shadow */
        }
        
        .cta-section-landing h2 {
            font-size: 2.2rem;
            margin-bottom: 0.75rem;
        }
        
        .cta-section-landing p {
            font-size: 1.1rem;
            margin-bottom: 1.5rem;
            opacity: 0.9;
        }
        
        /* Footer */
        .landing-footer { /* Renamed to avoid conflict */
            background: #2d3436;
            color: white;
            padding: 40px 0 20px;
            border-top-left-radius: 15px; /* Rounded corners */
            border-top-right-radius: 15px; /* Rounded corners */
        }
        
        .landing-footer-content { /* Renamed to avoid conflict */
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
        }
        
        .landing-footer-section h3 { /* Renamed to avoid conflict */
            margin-bottom: 0.75rem;
            color: #74b9ff;
            font-size: 1.1rem;
        }
        
        .landing-footer-section ul { /* Renamed to avoid conflict */
            list-style: none;
        }
        
        .landing-footer-section ul li { /* Renamed to avoid conflict */
            margin-bottom: 0.4rem;
        }
        
        .landing-footer-section ul li a { /* Renamed to avoid conflict */
            color: #b2bec3;
            text-decoration: none;
            transition: color 0.3s ease;
            font-size: 0.9rem;
        }
        
        .landing-footer-section ul li a:hover { /* Renamed to avoid conflict */
            color: white;
        }
        
        .landing-footer-bottom { /* Renamed to avoid conflict */
            text-align: center;
            margin-top: 1.5rem;
            padding-top: 1.5rem;
            border-top: 1px solid #636e72;
            color: #b2bec3;
            font-size: 0.9rem;
        }
        
        /* Responsive Design (for landing page) */
        @media (max-width: 768px) {
            .hero {
                padding: 80px 0 40px;
            }
            
            .hero h1 {
                font-size: 2.2rem;
            }
            
            .hero .tagline {
                font-size: 1.1rem;
            }
            
            .hero-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .landing-nav-links { /* Apply to landing nav links */
                display: none;
            }
            
            .pricing-card.featured {
                transform: none;
            }
            
            .features, .pricing, .cta-section-landing {
                padding: 40px 0;
            }
        }
        
        /* Smooth Scrolling */
        html {
            scroll-behavior: smooth;
        }
        
        /* Animation */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .feature-card,
        .pricing-card {
            animation: fadeInUp 0.5s ease-out;
        }

        /* Science Page Specific Styles (from science.html, adapted) */
        .science-page {
            min-height: 100vh;
            background: #f8f9fa; /* Changed to match body background for consistency */
            padding-top: 80px; /* Adjust for fixed landing header */
        }

        .science-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 60px 0;
            text-align: center;
            position: relative;
            overflow: hidden;
            padding-top: 120px; /* Adjust for fixed landing header */
        }
        
        .science-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grid" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="rgba(255,255,255,0.1)" stroke="rgba(255,255,255,0.1)" stroke-width="0.5"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)"/></svg>');
            z-index: 1;
        }
        
        .science-header-content {
            position: relative;
            z-index: 2;
        }
        
        .science-header h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            font-weight: 700;
        }
        
        .science-header p {
            font-size: 1.3rem;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .zemasync-logo-science {
            display: inline-flex;
            align-items: center;
            font-size: 1.2rem;
            margin-top: 2rem;
            opacity: 0.8;
            color: white; /* Ensure text is visible on gradient */
        }
        
        .science-logo-icon {
            width: 30px;
            height: 30px;
            background: rgba(255,255,255,0.2);
            border-radius: 6px;
            margin-right: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* Stats Section */
        .science-stats-section {
            background: white;
            padding: 60px 0;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            border-radius: 20px; /* Added rounded corners */
            margin: 20px auto; /* Center with margin */
            max-width: 1200px; /* Limit width */
        }
        
        .science-stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
            text-align: center;
        }
        
        .science-stat-card {
            padding: 2rem 1rem;
            border-radius: 15px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            transition: transform 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05); /* Subtle shadow */
        }
        
        .science-stat-card:hover {
            transform: translateY(-5px);
        }
        
        .science-stat-number {
            font-size: 3rem;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 0.5rem;
            animation: countUp 2s ease-out;
        }
        
        .science-stat-label {
            font-size: 1.1rem;
            color: #666;
            font-weight: 500;
        }
        
        /* New Scientific Content Sections */
        .science-molecular-section, .science-neuroimmune-section {
            padding: 80px 0;
            background: white;
            border-radius: 20px;
            margin: 20px auto;
            max-width: 1200px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .science-molecular-section h3, .science-neuroimmune-section h3 {
            font-size: 2rem;
            text-align: center;
            margin-bottom: 2rem;
            color: #2d3436;
            position: relative;
        }
        .science-molecular-section h3::after, .science-neuroimmune-section h3::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 3px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            border-radius: 2px;
        }
        .science-content-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            padding: 0 20px;
        }
        .science-content-block {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            border-left: 4px solid #667eea;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        .science-content-block h4 {
            font-size: 1.3rem;
            color: #2d3436;
            margin-bottom: 1rem;
        }
        .science-content-block p {
            font-size: 1rem;
            line-height: 1.6;
            color: #555;
        }
        .science-diagram-placeholder {
            background: linear-gradient(135deg, #e0f2f7, #c1e4ed);
            border-radius: 15px;
            height: 250px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #00796b;
            font-weight: bold;
            font-size: 1.2rem;
            text-align: center;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.1);
        }
        @media (max-width: 768px) {
            .science-content-grid {
                grid-template-columns: 1fr;
            }
        }

        /* 3D Visualization Section */
        .science-visualization-section {
            padding: 80px 0;
            background: white;
            border-radius: 20px; /* Added rounded corners */
            margin: 20px auto; /* Center with margin */
            max-width: 1200px; /* Limit width */
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        
        .science-section-title {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 3rem;
            color: #2d3436;
            position: relative;
        }
        
        .science-section-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 3px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            border-radius: 2px;
        }
        
        .science-brain-skin-connection {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 3rem;
            align-items: center;
            margin: 4rem 0;
        }
        
        .science-connection-viz {
            background: linear-gradient(135deg, #667eea10, #764ba210);
            border-radius: 20px;
            padding: 2rem;
            position: relative;
            height: 400px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
        }
        
        .science-brain-model {
            width: 150px;
            height: 150px;
            background: linear-gradient(135deg, #ff7675, #fd79a8);
            border-radius: 50%;
            position: absolute;
            top: 50px;
            left: 50px;
            animation: pulse 3s infinite;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            color: white;
            box-shadow: 0 20px 40px rgba(255,118,117,0.3);
        }
        
        .science-skin-model {
            width: 120px;
            height: 120px;
            background: linear-gradient(135deg, #fdcb6e, #e17055);
            border-radius: 15px;
            position: absolute;
            bottom: 80px;
            right: 60px;
            animation: pulse 3s infinite 1.5s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            color: white;
            box-shadow: 0 15px 30px rgba(253,203,110,0.3);
        }
        
        .science-connection-line {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 200px;
            height: 2px;
            background: linear-gradient(90deg, #667eea, #764ba2);
            transform: translate(-50%, -50%) rotate(-30deg);
            animation: glow 2s infinite alternate;
        }
        
        .science-connection-line::before,
        .science-connection-line::after {
            content: '';
            position: absolute;
            width: 10px;
            height: 10px;
            background: #667eea;
            border-radius: 50%;
            top: -4px;
            animation: travel 3s infinite;
        }
        
        .science-connection-line::before {
            left: 0;
        }
        
        .science-connection-line::after {
            right: 0;
            animation-delay: 1s;
        }
        
        .science-connection-info {
            padding: 2rem 0;
        }
        
        .science-connection-info h3 {
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
            color: #2d3436;
        }
        
        .science-pathway-list {
            list-style: none;
            space-y: 1rem;
        }
        
        .science-pathway-item {
            background: white;
            padding: 1rem;
            border-radius: 10px;
            border-left: 4px solid #667eea;
            margin-bottom: 1rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .science-pathway-item strong {
            color: #667eea;
        }
        
        /* Research Section */
        .science-research-section {
            background: white;
            padding: 80px 0;
            border-radius: 20px; /* Added rounded corners */
            margin: 20px auto; /* Center with margin */
            max-width: 1200px; /* Limit width */
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        
        .science-research-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }
        
        .science-research-card {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 2rem;
            border-left: 4px solid #667eea;
            transition: transform 0.3s ease;
            position: relative;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05); /* Subtle shadow */
        }
        
        .science-research-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #667eea20, #764ba220);
            border-radius: 0 15px 0 50px;
        }
        
        .science-research-card:hover {
            transform: translateY(-5px);
        }
        
        .science-research-card h4 {
            font-size: 1.3rem;
            margin-bottom: 1rem;
            color: #2d3436;
        }
        
        .science-research-meta {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 1rem;
            font-style: italic;
        }
        
        /* Interactive Chart (from science.html, adapted) */
        .science-chart-container {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            margin: 2rem 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .science-correlation-chart {
            width: 100%;
            height: 300px;
            background: linear-gradient(45deg, #f8f9fa 25%, transparent 25%), 
                        linear-gradient(-45deg, #f8f9fa 25%, transparent 25%), 
                        linear-gradient(45deg, transparent 75%, #f8f9fa 75%), 
                        linear-gradient(-45deg, transparent 75%, #f8f9fa 75%);
            background-size: 20px 20px;
            background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
            border-radius: 10px;
            position: relative;
            overflow: hidden;
        }
        
        .science-chart-line {
            position: absolute;
            bottom: 20px;
            left: 20px;
            width: calc(100% - 40px);
            height: 3px;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 2px;
            animation: drawLine 3s ease-out infinite;
        }
        
        .science-data-point {
            position: absolute;
            width: 12px;
            height: 12px;
            background: #667eea;
            border-radius: 50%;
            animation: bounce 2s infinite;
        }
        
        .science-data-point:nth-child(2) { bottom: 30px; left: 15%; animation-delay: 0.2s; }
        .science-data-point:nth-child(3) { bottom: 80px; left: 30%; animation-delay: 0.4s; }
        .science-data-point:nth-child(4) { bottom: 120px; left: 45%; animation-delay: 0.6s; }
        .science-data-point:nth-child(5) { bottom: 180px; left: 60%; animation-delay: 0.8s; }
        .science-data-point:nth-child(6) { bottom: 220px; left: 75%; animation-delay: 1.0s; }
        .science-data-point:nth-child(7) { bottom: 250px; left: 90%; animation-delay: 1.2s; }
        
        /* Animations */
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        @keyframes glow {
            0% { box-shadow: 0 0 10px #667eea; }
            100% { box-shadow: 0 0 20px #764ba2; }
        }
        
        @keyframes travel {
            0% { transform: translateX(0); }
            100% { transform: translateX(180px); }
        }
        
        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @keyframes countUp {
            0% { opacity: 0; transform: translateY(20px); }
            100% { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes drawLine {
            0% { width: 0; }
            100% { width: calc(100% - 40px); }
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        /* Science CTA Section */
        .science-cta-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 60px 0;
            text-align: center;
            border-radius: 20px; /* Added rounded corners */
            margin: 20px auto; /* Center with margin */
            max-width: 1200px; /* Limit width */
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        
        .science-cta-section h2 {
            font-size: 2rem;
            margin-bottom: 1rem;
        }
        
        .science-btn-primary {
            background: white;
            color: #764ba2;
            padding: 15px 30px;
            border-radius: 30px;
            text-decoration: none;
            font-weight: 600;
            display: inline-block;
            margin-top: 1rem;
            transition: transform 0.3s ease;
        }
        
        .science-btn-primary:hover {
            transform: translateY(-2px);
        }

        /* Architecture Page Specific Styles (from architecture.html, adapted) */
        .architecture-page {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); /* Apply background to the page div */
            color: #333;
            overflow-x: auto; /* Keep overflow-x for this specific page */
            min-height: 100vh; /* Ensure it takes full height */
            padding-top: 80px; /* Adjust for fixed landing header */
        }

        .architecture-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .architecture-header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
        }
        
        .architecture-header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .architecture-header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .architecture-evolution-container {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 30px;
            margin-bottom: 50px;
        }
        
        .architecture-version-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .architecture-version-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 25px 50px rgba(0,0,0,0.15);
        }
        
        .architecture-version-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .architecture-version-badge {
            background: linear-gradient(45deg, #FF6B6B, #4ECDC4);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9rem;
            margin-right: 15px;
        }
        
        .architecture-version-card.v0 .architecture-version-badge { background: linear-gradient(45deg, #74b9ff, #0984e3); }
        .architecture-version-card.v1 .architecture-version-badge { background: linear-gradient(45deg, #00b894, #00a085); }
        .architecture-version-card.v2 .architecture-version-badge { background: linear-gradient(45deg, #e17055, #d63031); }
        
        .architecture-timeline {
            font-size: 0.9rem;
            color: #666;
            font-weight: 500;
        }
        
        .architecture-version-title {
            font-size: 1.4rem;
            font-weight: 600;
            margin-bottom: 15px;
            color: #2d3436;
        }
        
        .architecture-tech-stack {
            margin-bottom: 20px;
        }
        
        .architecture-tech-stack h4 {
            font-size: 1rem;
            margin-bottom: 12px;
            color: #636e72;
            border-bottom: 2px solid #ddd;
            padding-bottom: 5px;
        }
        
        .architecture-tech-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .architecture-tech-tag {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
            color: #495057;
        }
        
        .architecture-diagram-style { /* Renamed to avoid conflict with HTML element */
            margin-top: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #74b9ff;
        }
        
        .architecture-component {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 10px;
            margin: 8px 0;
            text-align: center;
            font-size: 0.85rem;
            font-weight: 500;
            position: relative;
        }
        
        .architecture-component.frontend { border-color: #74b9ff; background: #f8faff; }
        .architecture-component.backend { border-color: #00b894; background: #f0fff4; }
        .architecture-component.ai { border-color: #e17055; background: #fff5f3; }
        .architecture-component.database { border-color: #a29bfe; background: #f8f7ff; }
        
        .architecture-arrow {
            text-align: center;
            font-size: 1.5rem;
            color: #74b9ff;
            margin: 5px 0;
        }
        
        .architecture-features-list {
            list-style: none;
            margin-top: 15px;
        }
        
        .architecture-features-list li {
            padding: 5px 0;
            font-size: 0.9rem;
            position: relative;
            padding-left: 20px;
        }
        
        .architecture-features-list li:before {
            content: "✓";
            position: absolute;
            left: 0;
            color: #00b894;
            font-weight: bold;
        }
        
        .architecture-future-roadmap {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-top: 30px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
        }
        
        .architecture-roadmap-title {
            text-align: center;
            font-size: 1.8rem;
            margin-bottom: 30px;
            color: #2d3436;
            position: relative;
        }
        
        .architecture-roadmap-title:after {
            content: "";
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 3px;
            background: linear-gradient(45deg, #74b9ff, #e17055);
            border-radius: 2px;
        }
        
        .architecture-roadmap-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
        }
        
        .architecture-roadmap-item {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            border-left: 4px solid #74b9ff;
            transition: transform 0.2s ease;
        }
        
        .architecture-roadmap-item:hover {
            transform: scale(1.02);
        }
        
        .architecture-roadmap-item h4 {
            font-size: 1.1rem;
            margin-bottom: 10px;
            color: #2d3436;
        }
        
        @media (max-width: 1024px) {
            .architecture-evolution-container {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .architecture-header h1 {
                font-size: 2rem;
            }
            
            .architecture-container {
                padding: 15px;
            }
        }
        
        .architecture-highlight-box {
            background: linear-gradient(45deg, #74b9ff, #0984e3);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
        }
        
        .architecture-highlight-box h3 {
            margin-bottom: 10px;
            font-size: 1.2rem;
        }
    </style>
</head>
<body>
    <div id="customAlertModal" class="modal">
        <div class="modal-content">
            <span class="modal-close-button" onclick="closeCustomAlert()">&times;</span>
            <p id="customAlertMessage" class="modal-message"></p>
            <button class="modal-ok-button" onclick="closeCustomAlert()">OK</button>
        </div>
    </div>

    <div id="landingPage" class="min-h-screen">
        <header class="landing-header">
            <nav class="container landing-nav">
                <span class="landing-logo-text">ZemaSync</span>
                <ul class="landing-nav-links">
                    <li><a href="#features">Features</a></li>
                    <li><a href="#pricing">Pricing</a></li>
                    <li><a href="#contact">Contact</a></li>
                    <li><a href="#" onclick="showSciencePage(); return false;">Science</a></li>
                    <li><a href="#" onclick="showArchitecturePage(); return false;">Architecture</a></li>
                    <li><a href="#" onclick="showLoginFromLanding(); return false;">Platform</a></li>
                </ul>
                <a href="#" onclick="showLoginFromLanding(); return false;" class="landing-cta-button">Get Started</a>
            </nav>
        </header>

        <section class="hero">
            <div class="container">
                <div class="hero-content">
                    <div class="hero-logo">
                        <img src="https://placehold.co/220x220/667eea/ffffff?text=ZemaSync+Logo" alt="ZemaSync Hero Logo" width="220" height="220" style="border-radius: 2rem;">
                    </div>
                    <h1 class="text-4xl font-bold mb-4">AI-powered platform connecting dermatology and mental health for comprehensive eczema patient care.</h1>
                    <p class="tagline">Early diagnosis and management of psychodermatological comorbidities made simple.</p>
                    <p class="description">
                        ZemaSync bridges the gap between physical and mental well-being, offering integrated insights and personalized care plans for eczema patients.
                    </p>
                    <div class="hero-buttons">
                        <button onclick="showLoginFromLanding(); return false;" class="btn-primary-landing">Start Free Trial</button>
                        <a href="#features" class="btn-secondary-landing">Learn More</a>
                    </div>
                </div>
            </div>
        </section>

        <section id="features" class="features">
            <div class="container">
                <h2 class="section-title">Revolutionizing Psychodermatological Care</h2>
                <div class="features-grid">
                    <div class="feature-card rounded-xl">
                        <div class="feature-icon">🤖</div>
                        <h3>AI-Powered Diagnosis</h3>
                        <p>Advanced computer vision analyzes skin conditions while ML models assess psychological indicators for comprehensive evaluation.</p>
                    </div>
                    <div class="feature-card rounded-xl">
                        <div class="feature-icon">🔬</div>
                        <h3>Clinical Decision Support</h3>
                        <p>Evidence-based recommendations combining dermatological severity scores with psychological assessments.</p>
                    </div>
                    <div class="feature-card rounded-xl">
                        <div class="feature-icon">📊</div>
                        <h3>Integrated Dashboards</h3>
                        <p>Real-time monitoring with intuitive visualizations tracking both skin condition and mental health metrics.</p>
                    </div>
                    <div class="feature-card rounded-xl">
                        <div class="feature-icon">🔒</div>
                        <h3>GDPR Compliant</h3>
                        <p>European-first design ensuring full compliance with GDPR, MDR, and healthcare data protection regulations.</p>
                    </div>
                    <div class="feature-card rounded-xl">
                        <div class="feature-icon">🏥</div>
                        <h3>Healthcare Integration</h3>
                        <p>Seamless integration with European healthcare systems using HL7 FHIR standards.</p>
                    </div>
                    <div class="feature-card rounded-xl">
                        <div class="feature-icon">📱</div>
                        <h3>Multi-Platform Access</h3>
                        <p>Web and mobile applications ensuring access anywhere, anytime for providers and patients.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="pricing" class="pricing">
            <div class="container">
                <h2 class="section-title">Choose Your Plan</h2>
                <div class="pricing-grid">
                    <div class="pricing-card rounded-xl">
                        <div class="plan-name">Start Plan</div>
                        <div class="plan-price">€6,000</div>
                        <div class="plan-billing">annually (or €550/month)</div>
                        <ul class="plan-features">
                            <li>Up to 5 patients free version</li>
                            <li>2 users up to 25 patients</li>
                            <li>Dashboards, decision making tools</li>
                            <li>Patients History oy saved upto 1.5 months</li>
                        </ul>
                        <button onclick="showLoginFromLanding(); return false;" class="plan-button-landing secondary rounded-lg">Try 1 Month</button>
                    </div>

                    <div class="pricing-card featured rounded-xl">
                        <div class="plan-name">Standard Plan</div>
                        <div class="plan-price">€30,000</div>
                        <div class="plan-billing">annually (or €2,750/month)</div>
                        <ul class="plan-features">
                            <li>Up to 2 patients free version</li>
                            <li>Dashboards, decision tools, predictions</li>
                            <li>Patient history saved up to 1 year</li>
                        </ul>
                        <button onclick="showLoginFromLanding(); return false;" class="plan-button-landing secondary rounded-lg">Get Started</button>
                    </div>

                    <div class="pricing-card rounded-xl">
                        <div class="plan-name">Pro Plan</div>
                        <div class="plan-price">€50,000</div>
                        <div class="plan-billing">annually (or €4,580/month)</div>
                        <ul class="plan-features">
                            <li>50 users</li>
                            <li>Dashboards, decision making tools, diagnosis predictions</li>
                            <li>Treatment recommendations</li>
                            <li>Patient history saved up to 3 years</li>
                        </ul>
                        <button onclick="showLoginFromLanding(); return false;" class="plan-button-landing primary rounded-lg">Get Started</button>
                    </div>

                    <div class="pricing-card custom rounded-xl">
                        <div class="plan-name">Custom Plan</div>
                        <div class="plan-price">Custom Pricing</div>
                        <div class="plan-billing">For large organizations</div>
                        <ul class="plan-features">
                            <li>50+ users</li>
                            <li>Ideal for large organizations with specific needs</li>
                            <li>Dashboards, decision making tools, detail diagnosis predictions</li>
                            <li>Treatment recommendations</li>
                            <li>Recommends HCP</li>
                            <li>Patients. history saved upto 5 years</li>
                        </ul>
                        <a href="#contact" class="plan-button-landing secondary rounded-lg">Contact Sales</a>
                    </div>
                </div>
            </div>
        </section>

        <section class="cta-section-landing">
            <div class="container">
                <h2 class="text-3xl font-bold mb-4">Ready to Transform Patient Care?</h2>
                <p class="text-lg mb-8">Join leading European healthcare providers in revolutionizing psychodermatological treatment</p>
                <div class="hero-buttons">
                    <button onclick="showLoginFromLanding(); return false;" class="btn-primary-landing">Start Your Free Trial</button>
                    <a href="#contact" class="btn-secondary-landing">Schedule Demo</a>
                </div>
            </div>
        </section>

        <footer id="contact" class="landing-footer">
            <div class="container">
                <div class="landing-footer-content">
                    <div class="landing-footer-section">
                        <h3>ZemaSync</h3>
                        <p class="text-gray-400">Bridging dermatology and mental health through innovative AI technology.</p>
                    </div>
                    <div class="landing-footer-section">
                        <h3>Product</h3>
                        <ul>
                            <li><a href="#features" class="text-gray-400 hover:text-white">Features</a></li>
                            <li><a href="#pricing" class="text-gray-400 hover:text-white">Pricing</a></li>
                            <li><a href="https://x.ai/api" class="text-gray-400 hover:text-white">API Documentation</a></li>
                            <li><a href="#integrations" class="text-gray-400 hover:text-white">Integrations</a></li>
                        </ul>
                    </div>
                    <div class="landing-footer-section">
                        <h3>Company</h3>
                        <ul>
                            <li><a href="#about" class="text-gray-400 hover:text-white">About Us</a></li>
                            <li><a href="#careers" class="text-gray-400 hover:text-white">Careers</a></li>
                            <li><a href="#blog" class="text-gray-400 hover:text-white">Blog</a></li>
                            <li><a href="#press" class="text-gray-400 hover:text-white">Press</a></li>
                        </ul>
                    </div>
                    <div class="landing-footer-section">
                        <h3>Support</h3>
                        <ul>
                            <li><a href="#help" class="text-gray-400 hover:text-white">Help Center</a></li>
                            <li><a href="#contact" class="text-gray-400 hover:text-white">Contact Support</a></li>
                            <li><a href="#privacy" class="text-gray-400 hover:text-white">Privacy Policy</a></li>
                            <li><a href="#terms" class="text-gray-400 hover:text-white">Terms of Service</a></li>
                        </ul>
                    </div>
                </div>
                <div class="mt-8 text-center text-gray-400">
                    <p>&copy; 2025 ZemaSync. All rights reserved. | Made with ❤️ for European Healthcare</p>
                </div>
            </div>
        </footer>
    </div>

    <div id="sciencePage" class="hidden science-page">
        <header class="landing-header">
            <nav class="container landing-nav">
                <span class="landing-logo-text">ZemaSync</span>
                <ul class="landing-nav-links">
                    <li><a href="#" onclick="showLandingPage(); return false;">Home</a></li>
                    <li><a href="#" onclick="showSciencePage(); return false;">Science</a></li>
                    <li><a href="#" onclick="showArchitecturePage(); return false;">Architecture</a></li>
                    <li><a href="#" onclick="showLoginFromLanding(); return false;">Platform</a></li>
                </ul>
                <a href="#" onclick="showLoginFromLanding(); return false;" class="landing-cta-button">Get Started</a>
            </nav>
        </header>

        <section class="science-header">
            <div class="container">
                <div class="science-header-content">
                    <h1>The Science Behind Eczema & Depression</h1>
                    <p>Understanding the complex bidirectional relationship between atopic dermatitis and psychological comorbidities through evidence-based research and clinical insights.</p>
                    <div class="zemasync-logo-science">
                        <div class="science-logo-icon">📊</div>
                        Powered by ZemaSync Research
                    </div>
                </div>
            </div>
        </section>

        <section class="science-stats-section">
            <div class="container">
                <div class="science-stats-grid">
                    <div class="science-stat-card rounded-xl">
                        <div class="science-stat-number">23%</div>
                        <div class="science-stat-label">of eczema patients develop depression</div>
                    </div>
                    <div class="science-stat-card rounded-xl">
                        <div class="science-stat-number">2.8x</div>
                        <div class="science-stat-label">higher risk of anxiety disorders</div>
                    </div>
                    <div class="science-stat-card rounded-xl">
                        <div class="science-stat-number">47%</div>
                        <div class="science-stat-label">experience sleep disturbances</div>
                    </div>
                    <div class="science-stat-card rounded-xl">
                        <div class="science-stat-number">60%</div>
                        <div class="science-stat-label">report decreased quality of life</div>
                    </div>
                </div>
            </div>
        </section>

        <section class="science-molecular-section">
            <div class="container">
                <h3>Molecular and Immunological Crossroads</h3>
                <div class="science-content-grid">
                    <div class="science-content-block rounded-xl">
                        <h4>Cytokine Dysregulation</h4>
                        <p>Atopic dermatitis is characterized by a Th2-mediated inflammatory response, leading to increased levels of cytokines like IL-4, IL-13, and IL-31. These cytokines not only drive skin inflammation and pruritus but also influence neuroinflammation and neurotransmitter systems, contributing to depressive symptoms.</p>
                    </div>
                    <div class="science-content-block rounded-xl">
                        <h4>Genetic Predisposition</h4>
                        <p>Shared genetic vulnerabilities, such as polymorphisms in genes related to epidermal barrier function (e.g., filaggrin) and immune regulation, may predispose individuals to both eczema and psychiatric disorders. This highlights a common biological underpinning.</p>
                    </div>
                    <div class="science-content-block rounded-xl">
                        <h4>Microbiome-Gut-Brain-Skin Axis</h4>
                        <p>Emerging research suggests a complex interplay between the gut microbiome, systemic inflammation, and both skin and brain health. Dysbiosis can exacerbate immune responses and impact mental well-being, forming a crucial link in psychodermatology.</p>
                    </div>
                    <div class="science-content-block rounded-xl">
                        <h4>Oxidative Stress & Mitochondrial Dysfunction</h4>
                        <p>Chronic inflammation in eczema can lead to increased oxidative stress and mitochondrial dysfunction, which are also implicated in the pathophysiology of depression. These cellular mechanisms represent common pathways of disease progression.</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="science-neuroimmune-section">
            <div class="container">
                <h3>Neuro-Immune Axis in Psychodermatology</h3>
                <div class="science-content-grid">
                    <div class="science-content-block rounded-xl">
                        <h4>Neuropeptide Signaling</h4>
                        <p>Neuropeptides such as Substance P and calcitonin gene-related peptide (CGRP), released by nerves in the skin, contribute to neurogenic inflammation and pruritus. These same neuropeptides also play roles in central nervous system function and mood regulation.</p>
                    </div>
                    <div class="science-content-block rounded-xl">
                        <h4>HPA Axis Dysregulation</h4>
                        <p>Chronic stress associated with eczema can lead to persistent activation and subsequent dysregulation of the hypothalamic-pituitary-adrenal (HPA) axis. This results in altered cortisol levels, impacting immune responses and increasing susceptibility to mood disorders.</p>
                    </div>
                    <div class="science-content-block rounded-xl">
                        <h4>Neural Circuitry & Itch Perception</h4>
                        <p>The neural pathways involved in itch perception are closely linked to brain regions associated with emotion, reward, and stress. Chronic itch can lead to structural and functional changes in these brain areas, perpetuating a cycle of discomfort and psychological distress.</p>
                    </div>
                    <div class="science-content-block rounded-xl">
                        <h4>Immune Cell-Nerve Interactions</h4>
                        <p>Immune cells in the skin and periphery can directly interact with nerve endings, releasing inflammatory mediators that activate sensory neurons and contribute to itch and pain. This bidirectional communication underscores the integrated nature of skin and brain health.</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="science-visualization-section">
            <div class="container">
                <h2 class="science-section-title">Brain-Skin Connection Pathways</h2>
                <div class="science-brain-skin-connection">
                    <div class="science-connection-viz">
                        <div class="science-brain-model">🧠</div>
                        <div class="science-skin-model">🫱</div>
                        <div class="science-connection-line"></div>
                    </div>
                    <div class="science-connection-info">
                        <h3>Neuroinflammatory Pathways</h3>
                        <div class="science-pathway-list">
                            <div class="science-pathway-item rounded-lg">
                                <strong>HPA Axis:</strong> Chronic stress activates hypothalamic-pituitary-adrenal axis, releasing cortisol which suppresses immune function and worsens skin barrier function.
                            </div>
                            <div class="science-pathway-item rounded-lg">
                                <strong>Cytokine Network:</strong> Pro-inflammatory cytokines (IL-4, IL-13, IL-31) create systemic inflammation affecting both skin and brain.
                            </div>
                            <div class="science-pathway-item rounded-lg">
                                <strong>Neurotransmitters:</strong> Altered serotonin and dopamine levels impact both mood regulation and skin immune responses.
                            </div>
                            <div class="science-pathway-item rounded-lg">
                                <strong>Itch-Scratch Cycle:</strong> Chronic itching disrupts sleep, increases stress hormones, and perpetuates inflammatory cascade.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="science-research-section">
            <div class="container">
                <h2 class="science-section-title">Clinical Research Evidence</h2>
                <div class="science-research-grid">
                    <div class="science-research-card rounded-xl">
                        <h4>Longitudinal Cohort Study</h4>
                        <div class="science-research-meta">Journal of Investigative Dermatology, 2023</div>
                        <p>15-year follow-up of 12,000 patients showed eczema severity strongly correlates with depression risk (HR: 1.87, 95% CI: 1.45-2.41).</p>
                    </div>
                    <div class="science-research-card rounded-xl">
                        <h4>Meta-Analysis of Psychological Interventions</h4>
                        <div class="science-research-meta">British Journal of Dermatology, 2023</div>
                        <p>Cognitive-behavioral therapy combined with dermatological treatment showed 34% greater improvement in SCORAD index compared to standard care alone.</p>
                    </div>
                    <div class="science-research-card rounded-xl">
                        <h4>Biomarker Correlation Study</h4>
                        <div class="science-research-meta">Journal of Allergy and Clinical Immunology, 2024</div>
                        <p>Elevated IL-31 and decreased GABA levels found in 78% of eczema patients with concurrent depression, suggesting shared pathophysiology.</p>
                    </div>
                    <div class="science-research-card rounded-xl">
                        <h4>Healthcare Burden Analysis</h4>
                        <div class="science-research-meta">European Journal of Health Economics, 2023</div>
                        <p>Integrated psychodermatological care reduced healthcare costs by €2,847 per patient annually while improving quality-adjusted life years.</p>
                    </div>
                </div>
            </div>
        </section>
        <section class="science-cta-section">
            <div class="container">
                <h2>Ready to Bridge the Gap in Patient Care?</h2>
                <p>ZemaSync uses this scientific evidence to provide AI-powered integrated care for better patient outcomes.</p>
                <a href="#" onclick="showLoginFromLanding(); return false;" class="science-btn-primary">Explore ZemaSync Platform</a>
            </div>
        </section>
    </div>

    <div id="architecturePage" class="hidden architecture-page">
        <header class="landing-header">
            <nav class="container landing-nav">
                <span class="landing-logo-text">ZemaSync</span>
                <ul class="landing-nav-links">
                    <li><a href="#" onclick="showLandingPage(); return false;">Home</a></li>
                    <li><a href="#" onclick="showSciencePage(); return false;">Science</a></li>
                    <li><a href="#" onclick="showArchitecturePage(); return false;">Architecture</a></li>
                    <li><a href="#" onclick="showLoginFromLanding(); return false;">Platform</a></li>
                </ul>
                <a href="#" onclick="showLoginFromLanding(); return false;" class="landing-cta-button">Get Started</a>
            </nav>
        </header>

        <div class="architecture-container">
            <div class="architecture-header">
                <h1>🔬 ZemaSync AI System Architecture & Development Roadmap</h1>
                <p>Early Diagnosis & Management of Eczema-Psychological Comorbidities</p>
            </div>
            
            <div class="architecture-evolution-container">
                <div class="architecture-version-card v0 rounded-xl">
                    <div class="architecture-version-header">
                        <div class="architecture-version-badge">V0 - MVP</div>
                        <div class="architecture-timeline">Months 1-6</div>
                    </div>
                    <div class="architecture-version-title">Proof of Concept</div>
                    
                    <div class="architecture-tech-stack">
                        <h4>🛠 Tech Stack</h4>
                        <div class="architecture-tech-tags">
                            <span class="architecture-tech-tag">Streamlit</span>
                            <span class="architecture-tech-tag">Python</span>
                            <span class="architecture-tech-tag">SQLite</span>
                            <span class="architecture-tech-tag">OpenCV</span>
                            <span class="architecture-tech-tag">Scikit-learn</span>
                        </div>
                    </div>
                    
                    <div class="architecture-diagram-style">
                        <div class="architecture-component frontend">📱 Streamlit Web App</div>
                        <div class="architecture-arrow">↓</div>
                        <div class="architecture-component backend">⚙️ Python Backend</div>
                        <div class="architecture-arrow">↓</div>
                        <div class="architecture-component ai">🤖 Basic ML Models</div>
                        <div class="architecture-arrow">↓</div>
                        <div class="architecture-component database">💾 SQLite Database</div>
                    </div>
                    
                    <ul class="architecture-features-list">
                        <li>Image upload & basic analysis</li>
                        <li>Simple eczema severity scoring</li>
                        <li>Basic psychological questionnaires</li>
                        <li>Local data storage</li>
                        <li>Demo-ready prototype</li>
                    </ul>
                    
                    <div class="architecture-highlight-box rounded-lg">
                        <h3>🎯 Goal: Validate Concept</h3>
                        <p>Demonstrate AI-driven correlation between skin condition and psychological state</p>
                    </div>
                </div>
                
                <div class="architecture-version-card v1 rounded-xl">
                    <div class="architecture-version-header">
                        <div class="architecture-version-badge">V1 - Web Platform</div>
                        <div class="architecture-timeline">Months 7-12</div>
                    </div>
                    <div class="architecture-version-title">Production Web App</div>
                    
                    <div class="architecture-tech-stack">
                        <h4>🛠 Tech Stack</h4>
                        <div class="architecture-tech-tags">
                            <span class="architecture-tech-tag">React.js</span>
                            <span class="architecture-tech-tag">Node.js</span>
                            <span class="architecture-tech-tag">PostgreSQL</span>
                            <span class="architecture-tech-tag">TensorFlow</span>
                            <span class="architecture-tech-tag">AWS/GCP</span>
                            <span class="architecture-tech-tag">Docker</span>
                        </div>
                    </div>
                    
                    <div class="architecture-diagram-style">
                        <div class="architecture-component frontend">🌐 React Web App</div>
                        <div class="architecture-arrow">↓</div>
                        <div class="architecture-component backend">🔧 REST API (Node.js)</div>
                        <div class="architecture-arrow">↓</div>
                        <div class="architecture-component ai">🧠 AI/ML Microservice</div>
                        <div class="architecture-arrow">↓</div>
                        <div class="architecture-component database">🗄️ PostgreSQL + Cloud Storage</div>
                    </div>
                    
                    <ul class="architecture-features-list">
                        <li>Professional web interface</li>
                        <li>Advanced computer vision models</li>
                        <li>Comprehensive patient profiles</li>
                        <li>Clinical decision support</li>
                        <li>Real-time analysis dashboard</li>
                        <li>HIPAA-compliant infrastructure</li>
                    </ul>
                    
                    <div class="architecture-highlight-box rounded-lg">
                        <h3>🎯 Goal: Clinical Deployment</h3>
                        <p>Ready for healthcare provider adoption and clinical trials</p>
                    </div>
                </div>
                
                <div class="architecture-version-card v2 rounded-xl">
                    <div class="architecture-version-header">
                        <div class="architecture-version-badge">V2 - Enterprise</div>
                        <div class="architecture-timeline">Months 13-18</div>
                    </div>
                    <div class="architecture-version-title">Full-Scale Platform</div>
                    
                    <div class="architecture-tech-stack">
                        <h4>🛠 Tech Stack</h4>
                        <div class="architecture-tech-tags">
                            <span class="architecture-tech-tag">Microservices</span>
                            <span class="architecture-tech-tag">Kubernetes</span>
                            <span class="architecture-tech-tag">GraphQL</span>
                            <span class="architecture-tech-tag">PyTorch</span>
                            <span class="architecture-tech-tag">Redis</span>
                            <span class="architecture-tech-tag">EHR Integration</span>
                        </div>
                    </div>
                    
                    <div class="architecture-diagram-style">
                        <div class="architecture-component frontend">🌍 Multi-Platform Frontend</div>
                        <div class="architecture-arrow">↓</div>
                        <div class="architecture-component backend">⚡ API Gateway + Microservices</div>
                        <div class="architecture-arrow">↓</div>
                        <div class="architecture-component ai">🚀 Advanced AI Pipeline</div>
                        <div class="architecture-arrow">↓</div>
                        <div class="architecture-component database">🏢 Enterprise Data Layer</div>
                    </div>
                    
                    <ul class="architecture-features-list">
                        <li>Scalable microservices architecture</li>
                        <li>Advanced predictive analytics</li>
                        <li>EHR system integration</li>
                        <li>Multi-tenant support</li>
                        <li>Real-time monitoring & alerts</li>
                        <li>Clinical research tools</li>
                    </ul>
                    
                    <div class="architecture-highlight-box rounded-lg">
                        <h3>🎯 Goal: Market Leadership</h3>
                        <p>Industry-standard platform for psychodermatological care</p>
                    </div>
                </div>
            </div>
            
            <div class="architecture-future-roadmap rounded-xl">
                <h2 class="architecture-roadmap-title">🚀 Future Roadmap: Mobile-First Evolution</h2>
                
                <div class="architecture-roadmap-grid">
                    <div class="architecture-roadmap-item rounded-lg">
                        <h4>📱 Mobile App Development</h4>
                        <p><strong>React Native/Flutter</strong> - Cross-platform mobile app with offline capabilities, camera integration, and push notifications for patient monitoring.</p>
                    </div>
                    
                    <div class="architecture-roadmap-item rounded-lg">
                        <h4>🔬 Advanced AI Features</h4>
                        <p><strong>Deep Learning Models</strong> - Computer vision for real-time skin analysis, NLP for sentiment analysis, and predictive modeling for treatment outcomes.</p>
                    </div>
                    
                    <div class="architecture-roadmap-item rounded-lg">
                        <h4>🌐 Telemedicine Integration</h4>
                        <p><strong>Virtual Consultations</strong> - Video conferencing, remote monitoring, and AI-assisted diagnosis for comprehensive remote care.</p>
                    </div>
                    
                    <div class="architecture-roadmap-item rounded-lg">
                        <h4>📊 Research Platform</h4>
                        <p><strong>Clinical Analytics</strong> - Population health insights, treatment efficacy analysis, and research data contribution platform.</p>
                    </div>
                    
                    <div class="architecture-roadmap-item rounded-lg">
                        <h4>🔗 IoT Integration</h4>
                        <p><strong>Wearable Devices</strong> - Integration with smartwatches and health sensors for continuous monitoring of stress and skin condition.</p>
                    </div>
                    
                    <div class="architecture-roadmap-item rounded-lg">
                        <h4>🌍 Global Expansion</h4>
                        <p><strong>Multi-Regional</strong> - Localization, regulatory compliance for different markets, and multi-language support.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="demo-container hidden" id="mainDemoContainer">
        <header class="landing-header">
            <nav class="container landing-nav">
                <span class="landing-logo-text">ZemaSync</span>
                <ul class="landing-nav-links">
                    <li><a href="#" onclick="showLandingPage(); return false;">Home</a></li>
                    <li><a href="#" onclick="showSciencePage(); return false;">Science</a></li>
                    <li><a href="#" onclick="showArchitecturePage(); return false;">Architecture</a></li>
                    <li><a href="#" onclick="showLoginFromLanding(); return false;">Platform</a></li>
                </ul>
                <a href="#" onclick="showLoginFromLanding(); return false;" class="landing-cta-button">Get Started</a>
            </nav>
        </header>

        <div class="demo-header">
            <h1>🧠 ZemaSync Platform Demo</h1>
            <p>AI-Driven Eczema & Mental Health Monitoring System</p>
        </div>

        <div class="login-container" id="loginContainer">
            <h2>ZemaSync Trial / Login</h2>
            <div class="space-y-4">
                <button onclick="startTrial()" class="w-full bg-green-600 text-white p-3 rounded-lg hover:bg-green-700 transition duration-200 text-lg font-semibold">Start Free Patient Trial</button>
                <div class="border-t border-gray-300 my-6"></div>
                <div>
                    <label class="block text-sm font-medium text-gray-700">Or Login as:</label>
                    <select id="userType" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 rounded-lg">
                        <option value="patient">Patient</option>
                        <option value="dermatologist">Dermatologist</option>
                        <option value="psychiatrist">Psychiatrist</option>
                    </select>
                </div>
                <button onclick="loginUser()" class="w-full bg-blue-600 text-white p-2 rounded-lg hover:bg-blue-700 transition duration-200">Login</button>
            </div>
        </div>

        <div class="platform-interface" id="platformInterface">
            <div class="nav-bar">
                <div class="nav-brand">ZemaSync</div>
                <div class="nav-menu" id="navMenu">
                    </div>
                <button class="btn btn-secondary" onclick="logoutUser()">Logout</button>
            </div>

            <div id="doctor-dashboard-view" class="view-content">
                <div class="main-content">
                    <div class="sidebar">
                        <h3 style="margin-bottom: 15px; color: #2d3436;">Active Patients</h3>
                        <div class="patient-list" id="doctorPatientList">
                            </div>
                        
                        <div style="margin-top: 20px; padding: 15px; background: #e8f4f8; border-radius: 12px;">
                            <h4 style="color: #2d3436; margin-bottom: 10px;">🔬 AI Analysis</h4>
                            <p style="font-size: 0.9rem; color: #666; line-height: 1.4;">
                                Real-time correlation analysis between skin condition severity and psychological indicators.
                            </p>
                        </div>
                    </div>

                    <div class="content-area" id="doctorMainContent">
                        <div class="dashboard-cards">
                            <div class="card">
                                <div class="card-header">
                                    <div class="card-title">Eczema Severity</div>
                                    <div class="status-indicator status-moderate" id="eczemaStatus">Moderate</div>
                                </div>
                                <div class="metric-display">
                                    <div class="metric-value" id="eczemaScore">0</div>
                                    <div>SCORAD Index</div>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" id="eczemaProgress" style="width: 0%; background: #fdcb6e;"></div>
                                </div>
                                <p style="font-size: 0.9rem; color: #666; margin-top: 10px;" id="eczemaDetails">
                                    Lesion area: N/A • Intensity: N/A • Subjective symptoms: N/A
                                </p>
                            </div>

                            <div class="card">
                                <div class="card-header">
                                    <div class="card-title">Depression Risk</div>
                                    <div class="status-indicator status-high" id="depressionStatus">High Risk</div>
                                </div>
                                <div class="metric-display">
                                    <div class="metric-value" id="depressionScore">0</div>
                                    <div>PHQ-9 Score</div>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" id="depressionProgress" style="width: 0%; background: #ff7675;"></div>
                                </div>
                                <p style="font-size: 0.9rem; color: #666; margin-top: 10px;" id="depressionDetails">
                                    Sleep quality: N/A • Mood: N/A • Social withdrawal: N/A
                                </p>
                            </div>

                            <div class="card">
                                <div class="card-header">
                                    <div class="card-title">Quality of Life</div>
                                    <div class="status-indicator status-moderate" id="qolStatus">Impacted</div>
                                </div>
                                <div class="metric-display">
                                    <div class="metric-value" id="qolScore">0</div>
                                    <div>DLQI Score</div>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" id="qolProgress" style="width: 0%; background: #fdcb6e;"></div>
                                </div>
                                <p style="font-size: 0.9rem; color: #666; margin-top: 10px;" id="qolDetails">
                                    Work productivity: N/A • Social activities: N/A • Self-esteem: N/A
                                </p>
                            </div>
                        </div>

                        <div class="ai-insights">
                            <h3>🤖 AI-Powered Insights & Recommendations</h3>
                            <div class="recommendation">
                                <div class="recommendation-title">⚠️ High Correlation Alert</div>
                                <div id="aiInsight1">Strong correlation detected between skin flare severity and depressive symptoms (r=0.78). Patient shows 85% likelihood of depression episode within 2 weeks.</div>
                            </div>
                            <div class="recommendation">
                                <div class="recommendation-title">💊 Treatment Optimization</div>
                                <div id="aiInsight2">Consider adjusting topical corticosteroid potency and introducing stress management techniques. Recommend mental health consultation.</div>
                            </div>
                            <div class="recommendation">
                                <div class="recommendation-title">📊 Predictive Analysis</div>
                                <div id="aiInsight3">Based on patient history and current trends, condition may worsen without intervention. Early psychological support recommended.</div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">Correlation Analysis</div>
                                <button class="btn btn-secondary" onclick="refreshCorrelation()">Refresh Analysis</button>
                            </div>
                            <div class="correlation-matrix">
                                <div class="correlation-cell">
                                    <div class="correlation-value" style="color: #ff7675;" id="corrEczemaDepression">0.00</div>
                                    <div class="correlation-label">Eczema ↔ Depression</div>
                                </div>
                                <div class="correlation-cell">
                                    <div class="correlation-value" style="color: #fdcb6e;" id="corrSleepSkin">0.00</div>
                                    <div class="correlation-label">Sleep ↔ Skin Quality</div>
                                </div>
                                <div class="correlation-cell">
                                    <div class="correlation-value" style="color: #00b894;" id="corrStressFlare">0.00</div>
                                    <div class="correlation-label">Stress ↔ Flare Frequency</div>
                                </div>
                            </div>
                            <div class="chart-container">
                                <canvas id="doctorCorrelationChart"></canvas>
                            </div>
                        </div>

                        <div class="action-buttons">
                            <button class="btn btn-primary" onclick="scheduleIntervention()">Schedule Intervention</button>
                            <button class="btn btn-secondary" onclick="generateReport()">Generate Report</button>
                            <button class="btn btn-secondary" onclick="referMentalHealth()">Refer to Mental Health</button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="patient-dashboard-view" class="view-content">
                <div class="content-area">
                    <h2 class="text-xl font-semibold mb-4 text-gray-800">Welcome, <span id="patientDashboardName">Patient</span>!</h2>
                    <p style="margin-bottom: 20px;">Here's a summary of your current health status and recent updates.</p>
                    <div class="dashboard-cards">
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">Your Eczema Severity</div>
                                <div class="status-indicator status-moderate" id="patientEczemaStatus">Moderate</div>
                            </div>
                            <div class="metric-display">
                                <div class="metric-value" id="patientEczemaScore">0</div>
                                <div>SCORAD Index</div>
                            </div>
                            <p style="font-size: 0.9rem; color: #666; margin-top: 10px;" id="patientEczemaDetails">
                                Your last recorded flare-up was N/A.
                            </p>
                        </div>
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">Your Mood Status</div>
                                <div class="status-indicator status-high" id="patientMoodStatus">High Risk</div>
                            </div>
                            <div class="metric-display">
                                <div class="metric-value" id="patientMoodScore">0</div>
                                <div>PHQ-9 Score</div>
                            </div>
                            <p style="font-size: 0.9rem; color: #666; margin-top: 10px;" id="patientMoodDetails">
                                Remember to log your mood daily for better insights.
                            </p>
                        </div>
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">Latest Doctor's Note</div>
                            </div>
                            <p style="font-size: 0.95rem; line-height: 1.5; color: #555;" id="patientDoctorNote">
                                "No recent notes."
                            </p>
                            <button class="btn btn-primary" style="margin-top: 15px;" onclick="showCustomAlert('Viewing full notes...')">View Full Notes</button>
                        </div>
                    </div>
                    <div class="action-buttons">
                        <button class="btn btn-primary" onclick="showCustomAlert('Logging new symptoms...')">Log New Symptoms</button>
                        <button class="btn btn-secondary" onclick="showCustomAlert('Contacting your doctor...')">Contact Your Doctor</button>
                    </div>
                </div>
            </div>

            <div id="psychiatrist-dashboard-view" class="view-content">
                <div class="main-content">
                    <div class="sidebar">
                        <h3 style="margin-bottom: 15px; color: #2d3436;">Active Patients</h3>
                        <div class="patient-list" id="psychPatientList">
                            </div>
                    </div>
                    <div class="content-area">
                        <h2 class="text-xl font-semibold mb-4 text-gray-800">Mental Health Overview</h2>
                        <div class="dashboard-cards">
                            <div class="card">
                                <div class="card-header">
                                    <div class="card-title">Depression Risk</div>
                                    <div class="status-indicator status-high" id="psychDepressionStatus">High Risk</div>
                                </div>
                                <div class="metric-display">
                                    <div class="metric-value" id="psychDepressionScore">0</div>
                                    <div>PHQ-9 Score</div>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" id="psychDepressionProgress" style="width: 0%; background: #ff7675;"></div>
                                </div>
                                <p style="font-size: 0.9rem; color: #666; margin-top: 10px;" id="psychDepressionDetails">
                                    Sleep quality: N/A • Mood: N/A • Social withdrawal: N/A
                                </p>
                            </div>
                            <div class="card">
                                <div class="card-header">
                                    <div class="card-title">Sleep Quality</div>
                                    <div class="status-indicator status-moderate" id="psychSleepStatus">Moderate</div>
                                </div>
                                <div class="metric-display">
                                    <div class="metric-value" id="psychSleepScore">0</div>
                                    <div>Hours/Night</div>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" id="psychSleepProgress" style="width: 0%; background: #fdcb6e;"></div>
                                </div>
                                <p style="font-size: 0.9rem; color: #666; margin-top: 10px;" id="psychSleepDetails">
                                    Last 7 days average.
                                </p>
                            </div>
                            <div class="card">
                                <div class="card-header">
                                    <div class="card-title">Mood Stability</div>
                                    <div class="status-indicator status-low" id="psychMoodStatus">Stable</div>
                                </div>
                                <div class="metric-display">
                                    <div class="metric-value" id="psychMoodScore">0</div>
                                    <div>Mood Variance</div>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" id="psychMoodProgress" style="width: 0%; background: #00b894;"></div>
                                </div>
                                <p style="font-size: 0.9rem; color: #666; margin-top: 10px;" id="psychMoodDetails">
                                    Based on daily mood logs.
                                </p>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">Mental Health Trends</div>
                            </div>
                            <div class="chart-container">
                                <canvas id="psychTrendsChart"></canvas>
                            </div>
                        </div>
                        <div class="action-buttons">
                            <button class="btn btn-primary" onclick="showCustomAlert('Scheduling therapy session...')">Schedule Therapy</button>
                            <button class="btn btn-secondary" onclick="showCustomAlert('Referring to dermatologist...')">Refer to Dermatologist</button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="admin-dashboard-view" class="view-content">
                <div class="content-area">
                    <h2>Admin Panel</h2>
                    <p style="margin-bottom: 20px;">Manage users, system settings, and overall platform performance.</p>
                    <div class="dashboard-cards">
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">User Accounts</div>
                            </div>
                            <div class="metric-display">
                                <div class="metric-value">150</div>
                                <div>Total Users</div>
                            </div>
                            <button class="btn btn-primary" onclick="showCustomAlert('Managing users...')">Manage Users</button>
                        </div>
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">System Health</div>
                            </div>
                            <div class="metric-display">
                                <div class="metric-value" style="color: #00b894;">Online</div>
                                <div>Status</div>
                            </div>
                            <button class="btn btn-secondary" onclick="showCustomAlert('Viewing system logs...')">View Logs</button>
                        </div>
                    </div>
                    <div class="action-buttons">
                        <button class="btn btn-primary" onclick="showCustomAlert('Adding new user...')">Add New User</button>
                        <button class="btn btn-secondary" onclick="showCustomAlert('Backing up database...')">Backup Database</button>
                    </div>
                </div>
            </div>
            
            <div id="patients-view" class="view-content">
                <div class="content-area">
                    <h2>Patient Management</h2>
                    <div class="search-bar" style="margin: 20px 0;">
                        <input type="text" placeholder="Search patients..." class="p-2 w-72 border rounded-lg shadow-sm" onkeyup="filterPatientsByName(this.value)">
                        <button class="btn btn-primary ml-2" onclick="showCustomAlert('Searching patients...')">Search</button>
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700">Filter by Eczema Severity</label>
                        <select id="patientsViewEczemaFilter" class="mt-1 block w-full md:w-auto p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 rounded-lg" onchange="filterPatientsBySeverity()">
                            <option value="">All</option>
                            <option value="Low">Low</option>
                            <option value="Moderate">Moderate</option>
                            <option value="High">High</option>
                        </select>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Name</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Eczema Severity</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Depression Risk</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Last Visit</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="patientsTableBody" class="bg-white divide-y divide-gray-200">
                                </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div id="analytics-view" class="view-content">
                <div class="content-area">
                    <h2>Analytics Dashboard</h2>
                    <p style="margin-bottom: 20px;">Detailed insights into patient population trends and aggregated data.</p>
                    <div class="dashboard-cards">
                        <div class="card">
                            <h3>Total Patients</h3>
                            <div class="metric-value" id="totalPatientsCount">0</div>
                            <p>Across all categories</p>
                        </div>
                        <div class="card">
                            <h3>Average Eczema Severity</h3>
                            <div class="metric-value" id="avgEczemaSeverity">0.0</div>
                            <p>SCORAD Index</p>
                        </div>
                        <div class="card">
                            <h3>Average Depression Risk</h3>
                            <div class="metric-value" id="avgDepressionRisk">0.0</div>
                            <p>PHQ-9 Score</p>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="analyticsOverviewChart"></canvas>
                    </div>
                </div>
            </div>

            <div id="reports-view" class="view-content">
                <div class="content-area">
                    <h2>Reports</h2>
                    <p style="margin-bottom: 20px;">Generate and download comprehensive reports for patient records and research.</p>
                    <div class="card">
                        <h3>Generate Patient Report</h3>
                        <div class="mb-4">
                            <select id="reportPatientSelect" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 rounded-lg">
                                <option value="">Select Patient</option>
                            </select>
                        </div>
                        <div class="mb-4">
                            <select id="reportTypeSelect" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 rounded-lg">
                                <option value="dermatologist">Dermatologist Report</option>
                                <option value="psychiatrist">Psychiatrist Report</option>
                            </select>
                        </div>
                        <button onclick="generateCombinedReport()" class="w-full bg-green-600 text-white p-2 rounded-lg hover:bg-green-700 transition duration-200">Generate Report</button>
                    </div>
                </div>
            </div>

            <div id="treatments-view" class="view-content">
                <div class="content-area">
                    <h2>Treatment Protocols</h2>
                    <p style="margin-bottom: 20px;">Access and manage standardized treatment plans.</p>
                    <div class="dashboard-cards">
                        <div class="card">
                            <h3>Standard Protocol (Mild/Moderate Eczema)</h3>
                            <p>For mild to moderate cases, focusing on topical treatments and basic lifestyle adjustments.</p>
                            <button class="btn btn-primary" onclick="showCustomAlert('Viewing details for Standard Protocol...')">View Details</button>
                        </div>
                        <div class="card">
                            <h3>Advanced Protocol (Severe Eczema)</h3>
                            <p>For severe cases, including systemic therapies and specialized care.</p>
                            <button class="btn btn-primary" onclick="showCustomAlert('Viewing details for Advanced Protocol...')">View Details</button>
                        </div>
                        <div class="card">
                            <h3>Mental Health Support Protocol</h3>
                            <p>Guidelines for integrating psychological interventions for patients with comorbidity.</p>
                            <button class="btn btn-primary" onclick="showCustomAlert('Viewing details for Mental Health Protocol...')">View Details</button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="research-view" class="view-content">
                <div class="content-area">
                    <h2>Research Studies</h2>
                    <p style="margin-bottom: 20px;">Explore ongoing research and published findings.</p>
                    <div class="dashboard-cards">
                        <div class="card">
                            <h3>Active Studies</h3>
                            <p>3 ongoing clinical trials exploring novel treatments and AI applications.</p>
                            <button class="btn btn-primary" onclick="showCustomAlert('Viewing active studies...')">View Studies</button>
                        </div>
                        <div class="card">
                            <h3>Published Research</h3>
                            <p>12 published papers on psychodermatology and AI in healthcare.</p>
                            <button class="btn btn-primary" onclick="showCustomAlert('Viewing publications...')">View Publications</button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="patient-history-view" class="view-content">
                <div class="content-area">
                    <h2>My History</h2>
                    <p>Detailed historical data of your eczema and mental health journey will be displayed here.</p>
                    <div class="chart-container">
                        <canvas id="patientHistoryChart"></canvas>
                    </div>
                </div>
            </div>
            <div id="patient-messages-view" class="view-content">
                <div class="content-area">
                    <h2>Messages</h2>
                    <p>Your secure messages with healthcare providers.</p>
                    <div class="bg-white p-6 rounded-lg shadow-md mt-6 rounded-xl">
                        <h3 class="text-xl font-semibold mb-4 text-gray-800">New Message</h3>
                        <div class="space-y-4">
                            <select id="patientMessageDoctorType" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 rounded-lg">
                                <option value="dermatologist">Dermatologist</option>
                                <option value="psychiatrist">Psychiatrist</option>
                            </select>
                            <textarea id="patientMessageContent" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 rounded-lg" placeholder="Type your message..."></textarea>
                            <button onclick="sendPatientMessage()" class="w-full bg-blue-600 text-white p-2 rounded-lg hover:bg-blue-700 transition duration-200">Send Message</button>
                        </div>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-md mt-6 rounded-xl">
                        <h3 class="text-xl font-semibold mb-4 text-gray-800">Past Messages</h3>
                        <div class="space-y-2" id="pastPatientMessages">
                            <p class="text-gray-700">No past messages.</p>
                        </div>
                    </div>
                </div>
            </div>
            <div id="admin-users-view" class="view-content">
                <div class="content-area">
                    <h2>User Management</h2>
                    <p>Manage user accounts, roles, and permissions.</p>
                    <div class="card">
                        <h3>User List</h3>
                        <ul class="list-disc pl-5">
                            <li>John Doe (Dermatologist)</li>
                            <li>Jane Smith (Patient)</li>
                            <li>Admin User (Admin)</li>
                        </ul>
                        <button class="btn btn-primary mt-4" onclick="showCustomAlert('Adding new user...')">Add User</button>
                    </div>
                </div>
            </div>
            <div id="admin-settings-view" class="view-content">
                <div class="content-area">
                    <h2>System Settings</h2>
                    <p>Configure platform-wide settings.</p>
                    <div class="card">
                        <h3>General Settings</h3>
                        <p>Platform version: 1.0.0</p>
                        <button class="btn btn-primary mt-4" onclick="showCustomAlert('Saving settings...')">Save Settings</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="floating-notification" id="notification">
        <strong>🎯 AI Alert:</strong> <span id="notificationText">New correlation pattern detected!</span>
    </div>

    <script>
        // Consolidated Patient Data
        const allPatientsData = [
            {
                id: 'sarah',
                name: "Sarah Johnson",
                eczema: { severity: "Moderate", scorad: 42, lesion_area: "25%", intensity: "6.5/10", symptoms: "Itching, redness", treatment: "Topical corticosteroids", adherence: "80%" },
                mental_health: { depression_risk: "High", phq9: 68, sleep_quality: "Poor", mood: "Declining", social_withdrawal: "Moderate" },
                qol: { status: "Impacted", dlqi: 35, work_productivity: "-40%", social_activities: "Limited", self_esteem: "Low" },
                correlations: [0.78, 0.64, 0.45], // Eczema-Depression, Sleep-Skin, Stress-Flare
                messages: [
                    { from: "patient", to: "dermatologist", content: "Severe itching today", timestamp: "2025-05-24" },
                    { from: "dermatologist", to: "patient", content: "Sarah, please continue with your prescribed topical treatment. I've also scheduled a follow-up with Dr. Smith for mental health support next week. Keep tracking your symptoms and mood.", timestamp: "2025-05-25" },
                    { from: "patient", to: "psychiatrist", content: "Feeling very low", timestamp: "2025-05-24" }
                ],
                history: [
                    { date: "2025-05-20", eczema_severity: 40, depression_score: 65 },
                    { date: "2025-05-24", eczema_severity: 42, depression_score: 68 },
                    { date: "2025-05-26", eczema_severity: 45, depression_score: 70 }
                ]
            },
            {
                id: 'mike',
                name: "Mike Chen",
                eczema: { severity: "High", scorad: 60, lesion_area: "40%", intensity: "8/10", symptoms: "Severe itching, scaling", treatment: "Oral antihistamines", adherence: "70%" },
                mental_health: { depression_risk: "High", phq9: 75, sleep_quality: "Very Poor", mood: "Severely Depressed", social_withdrawal: "High" },
                qol: { status: "Severely Impacted", dlqi: 50, work_productivity: "-60%", social_activities: "None", self_esteem: "Very Low" },
                correlations: [0.89, 0.72, 0.66],
                messages: [],
                history: [
                    { date: "2025-05-20", eczema_severity: 55, depression_score: 70 },
                    { date: "2025-05-24", eczema_severity: 60, depression_score: 75 }
                ]
            },
            {
                id: 'emma',
                name: "Emma Rodriguez",
                eczema: { severity: "Low", scorad: 20, lesion_area: "10%", intensity: "3/10", symptoms: "Mild redness", treatment: "Moisturizers", adherence: "90%" },
                mental_health: { depression_risk: "Low", phq9: 30, sleep_quality: "Good", mood: "Stable", social_withdrawal: "None" },
                qol: { status: "Stable", dlqi: 15, work_productivity: "Normal", social_activities: "Active", self_esteem: "High" },
                correlations: [0.45, 0.38, 0.22],
                messages: [],
                history: [
                    { date: "2025-05-20", eczema_severity: 20, depression_score: 30 },
                    { date: "2025-05-24", eczema_severity: 20, depression_score: 30 }
                ]
            },
            {
                id: 'james',
                name: "James Wilson",
                eczema: { severity: "Moderate", scorad: 45, lesion_area: "30%", intensity: "7/10", symptoms: "Itching, dryness", treatment: "Topical calcineurin inhibitors", adherence: "75%" },
                mental_health: { depression_risk: "Moderate", phq9: 50, sleep_quality: "Fair", mood: "Variable", social_withdrawal: "Mild" },
                qol: { status: "Impacted", dlqi: 40, work_productivity: "-30%", social_activities: "Reduced", self_esteem: "Moderate" },
                correlations: [0.65, 0.59, 0.41],
                messages: [],
                history: [
                    { date: "2025-05-20", eczema_severity: 45, depression_score: 50 },
                    { date: "2025-05-24", eczema_severity: 45, depression_score: 50 }
                ]
            }
        ];

        let currentPatientId = 'sarah'; // Default patient for doctor view
        let loggedInUserRole = null; // Stores the role of the logged-in user

        let doctorCorrelationChartInstance = null;
        let psychTrendsChartInstance = null;
        let patientHistoryChartInstance = null;
        let analyticsOverviewChartInstance = null;

        // Custom Alert/Message Box functions
        function showCustomAlert(message) {
            const modal = document.getElementById('customAlertModal');
            const msgElement = document.getElementById('customAlertMessage');
            msgElement.textContent = message;
            modal.classList.add('show');
        }

        function closeCustomAlert() {
            const modal = document.getElementById('customAlertModal');
            modal.classList.remove('show');
        }

        /**
         * Shows the initial landing page.
         */
        function showLandingPage() {
            document.getElementById('landingPage').classList.remove('hidden');
            document.getElementById('mainDemoContainer').classList.add('hidden');
            document.getElementById('sciencePage').classList.add('hidden'); // Ensure science page is hidden
            document.getElementById('architecturePage').classList.add('hidden'); // Ensure architecture page is hidden
            loggedInUserRole = null; // Reset logged-in role
        }

        /**
         * Shows the login/trial screen, hiding the landing page and other content pages.
         * This function is called from the landing page.
         */
        function showLoginFromLanding() {
            document.getElementById('landingPage').classList.add('hidden');
            document.getElementById('sciencePage').classList.add('hidden'); // Ensure science page is hidden
            document.getElementById('architecturePage').classList.add('hidden'); // Ensure architecture page is hidden
            document.getElementById('mainDemoContainer').classList.remove('hidden');
            document.getElementById('loginContainer').style.display = 'block';
            document.getElementById('platformInterface').style.display = 'none';
            // Clear any active patient selection visually
            document.querySelectorAll('.patient-item').forEach(item => item.classList.remove('active'));
            // Clear nav menu
            document.getElementById('navMenu').innerHTML = '';
        }

        /**
         * Shows the science page, hiding other content pages.
         */
        function showSciencePage() {
            document.getElementById('landingPage').classList.add('hidden');
            document.getElementById('mainDemoContainer').classList.add('hidden');
            document.getElementById('architecturePage').classList.add('hidden'); // Ensure architecture page is hidden
            document.getElementById('sciencePage').classList.remove('hidden');
            loggedInUserRole = null; // No specific role for science page
        }

        /**
         * Shows the architecture page, hiding other content pages.
         */
        function showArchitecturePage() {
            document.getElementById('landingPage').classList.add('hidden');
            document.getElementById('mainDemoContainer').classList.add('hidden');
            document.getElementById('sciencePage').classList.add('hidden'); // Ensure science page is hidden
            document.getElementById('architecturePage').classList.remove('hidden');
            loggedInUserRole = null; // No specific role for architecture page
        }

        /**
         * Starts a free patient trial, bypassing traditional login.
         */
        function startTrial() {
            loggedInUserRole = 'patient';
            document.getElementById('loginContainer').style.display = 'none';
            document.getElementById('platformInterface').style.display = 'block';
            updateNavBar('patient');
            showDashboard('patient');
            showNotification('Welcome to your Free Patient Trial!');
            // For patient view, we'll default to Sarah Johnson's data for demo purposes
            updatePatientDashboardDisplay(allPatientsData.find(p => p.id === 'sarah'));
        }

        /**
         * Handles user login based on selected user type.
         */
        function loginUser() {
            const userType = document.getElementById('userType').value;
            loggedInUserRole = userType;
            document.getElementById('loginContainer').style.display = 'none';
            document.getElementById('platformInterface').style.display = 'block';
            updateNavBar(userType);
            showDashboard(userType);
            showNotification(`Welcome, ${userType.charAt(0).toUpperCase() + userType.slice(1)}!`);

            if (userType === 'dermatologist' || userType === 'psychiatrist') {
                // For doctors/psychiatrists, select the first patient by default
                const firstPatientItem = document.querySelector(`#${userType === 'dermatologist' ? 'doctorPatientList' : 'psychPatientList'} .patient-item`);
                if (firstPatientItem) {
                    firstPatientItem.click(); // Simulate click to load data
                }
            } else if (userType === 'patient') {
                // For patient, load their specific data (assuming Sarah Johnson for demo)
                updatePatientDashboardDisplay(allPatientsData.find(p => p.id === 'sarah'));
            }
        }

        /**
         * Logs out the current user, resetting the interface to the login screen.
         */
        function logoutUser() {
            loggedInUserRole = null;
            document.getElementById('platformInterface').style.display = 'none';
            document.getElementById('loginContainer').style.display = 'block';
            document.getElementById('userType').value = 'patient'; // Reset select
            document.getElementById('navMenu').innerHTML = ''; // Clear nav menu
            showNotification('Logged out successfully.');
            // Destroy all chart instances on logout
            if (doctorCorrelationChartInstance) doctorCorrelationChartInstance.destroy();
            if (psychTrendsChartInstance) psychTrendsChartInstance.destroy();
            if (patientHistoryChartInstance) patientHistoryChartInstance.destroy();
            if (analyticsOverviewChartInstance) analyticsOverviewChartInstance.destroy();
            showLandingPage(); // Go back to landing page
        }

        /**
         * Updates the navigation bar items based on the user's role.
         * @param {string} role - The role of the logged-in user ('doctor', 'patient', 'admin').
         */
        function updateNavBar(role) {
            const navMenu = document.getElementById('navMenu');
            navMenu.innerHTML = ''; // Clear existing navigation items

            let navItems = [];
            if (role === 'dermatologist' || role === 'psychiatrist') {
                navItems = [
                    { name: 'Dashboard', view: `${role}-dashboard-view` },
                    { name: 'Patients', view: 'patients-view' },
                    { name: 'Analytics', view: 'analytics-view' },
                    { name: 'Reports', view: 'reports-view' },
                    { name: 'Treatments', view: 'treatments-view' },
                    { name: 'Research', view: 'research-view' }
                ];
            } else if (role === 'patient') {
                navItems = [
                    { name: 'My Dashboard', view: 'patient-dashboard-view' },
                    { name: 'My History', view: 'patient-history-view' },
                    { name: 'Messages', view: 'patient-messages-view' }
                ];
            } else if (role === 'admin') {
                navItems = [
                    { name: 'Admin Dashboard', view: 'admin-dashboard-view' },
                    { name: 'User Management', view: 'admin-users-view' },
                    { name: 'System Settings', view: 'admin-settings-view' }
                ];
            }

            navItems.forEach((item, index) => {
                const button = document.createElement('button');
                button.className = 'nav-item';
                button.textContent = item.name;
                button.onclick = () => switchView(item.view, button, role);
                navMenu.appendChild(button);
                if (index === 0) { // Set the first item as active by default
                    button.classList.add('active');
                }
            });
        }

        /**
         * Shows the appropriate dashboard view based on the user's role.
         * This is the initial view after login.
         * @param {string} role - The role of the logged-in user.
         */
        function showDashboard(role) {
            // Hide all view-content divs
            document.querySelectorAll('.view-content').forEach(view => {
                view.style.display = 'none';
            });

            let targetViewId;
            if (role === 'dermatologist') {
                targetViewId = 'doctor-dashboard-view'; // Using 'doctor' for dermatologist dashboard
                populateDoctorPatientList();
            } else if (role === 'psychiatrist') {
                targetViewId = 'psychiatrist-dashboard-view';
                populatePsychiatristPatientList();
            } else if (role === 'patient') {
                targetViewId = 'patient-dashboard-view';
            } else if (role === 'admin') {
                targetViewId = 'admin-dashboard-view';
            } else {
                // If no role, default to login view
                showLandingPage(); // Go back to landing page
                return;
            }

            // Show the selected view
            const selectedView = document.getElementById(targetViewId);
            if (selectedView) {
                selectedView.style.display = 'flex'; // Use flex for main-content layout
            }
            // Ensure the first nav item is active
            const firstNavItem = document.querySelector(`#navMenu .nav-item`);
            if (firstNavItem) {
                firstNavItem.classList.add('active');
            }
        }

        /**
         * Switches the displayed content view and updates the active navigation item.
         * @param {string} viewId - The ID of the view to display.
         * @param {HTMLElement} clickedButton - The navigation button that was clicked.
         * @param {string} role - The role of the logged-in user.
         */
        function switchView(viewId, clickedButton, role) {
            // Remove active class from all nav items
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            // Add active class to the clicked button
            if (clickedButton) {
                clickedButton.classList.add('active');
            }

            // Hide all view-content divs
            document.querySelectorAll('.view-content').forEach(view => {
                view.style.display = 'none';
            });

            // Show the selected view
            const selectedView = document.getElementById(viewId);
            if (selectedView) {
                selectedView.style.display = 'flex'; // Use flex for main-content layout

                // Specific initialization for each view
                if (viewId === 'patients-view') {
                    populatePatientsTable();
                    populateReportDropdowns(); // Populate for reports tab
                } else if (viewId === 'analytics-view') {
                    initAnalyticsOverviewChart();
                } else if (viewId === 'reports-view') {
                    populateReportDropdowns();
                } else if (viewId === 'patient-history-view') {
                    initPatientHistoryChart(allPatientsData.find(p => p.id === currentPatientId));
                } else if (viewId === 'patient-messages-view') {
                    displayPatientMessages(allPatientsData.find(p => p.id === currentPatientId));
                }
            }
            showNotification(`Switched to ${viewId.replace(/-/g, ' ').replace('-view', '').trim()} view`);
        }

        /**
         * Populates the patient list for the doctor's dashboard sidebar.
         */
        function populateDoctorPatientList() {
            const patientListDiv = document.getElementById('doctorPatientList');
            patientListDiv.innerHTML = ''; // Clear existing list
            allPatientsData.forEach(p => {
                const patientItem = document.createElement('div');
                patientItem.className = 'patient-item rounded-xl';
                patientItem.innerHTML = `
                    <div class="patient-name">${p.name}</div>
                    <div class="patient-status">${p.eczema.severity} severity • Last visit: ${p.history[p.history.length - 1].date}</div>
                `;
                patientItem.onclick = () => selectPatient(patientItem, p.id, 'doctor');
                patientListDiv.appendChild(patientItem);
            });
            // Select the first patient by default
            if (allPatientsData.length > 0) {
                selectPatient(patientListDiv.querySelector('.patient-item'), allPatientsData[0].id, 'doctor');
            }
        }

        /**
         * Populates the patient list for the psychiatrist's dashboard sidebar.
         */
        function populatePsychiatristPatientList() {
            const patientListDiv = document.getElementById('psychPatientList');
            patientListDiv.innerHTML = ''; // Clear existing list
            allPatientsData.forEach(p => {
                const patientItem = document.createElement('div');
                patientItem.className = 'patient-item rounded-xl';
                patientItem.innerHTML = `
                    <div class="patient-name">${p.name}</div>
                    <div class="patient-status">${p.mental_health.depression_risk} risk • Last visit: ${p.history[p.history.length - 1].date}</div>
                `;
                patientItem.onclick = () => selectPatient(patientItem, p.id, 'psychiatrist');
                patientListDiv.appendChild(patientItem);
            });
            // Select the first patient by default
            if (allPatientsData.length > 0) {
                selectPatient(patientListDiv.querySelector('.patient-item'), allPatientsData[0].id, 'psychiatrist');
            }
        }

        /**
         * Selects a patient in the sidebar and updates the dashboard with their data.
         * @param {HTMLElement} element - The patient item element that was clicked.
         * @param {string} patientId - The ID of the selected patient.
         * @param {string} dashboardType - 'doctor' or 'psychiatrist'
         */
        function selectPatient(element, patientId, dashboardType) {
            // Remove active class from all patients in the relevant sidebar
            document.querySelectorAll(`#${dashboardType === 'doctor' ? 'doctorPatientList' : 'psychPatientList'} .patient-item`).forEach(item => {
                item.classList.remove('active');
            });
            
            // Add active class to selected patient
            element.classList.add('active');
            
            currentPatientId = patientId; // Update the global current patient
            const patient = allPatientsData.find(p => p.id === patientId);

            if (dashboardType === 'doctor') {
                updateDoctorDashboardDisplay(patient);
            } else if (dashboardType === 'psychiatrist') {
                updatePsychiatristDashboardDisplay(patient);
            }
            
            showNotification(`Switched to ${patient.name}'s data`);
        }

        /**
         * Updates the metrics and status indicators on the doctor's dashboard
         * based on the currently selected patient.
         */
        function updateDoctorDashboardDisplay(patient) {
            if (!patient) return;

            // Eczema Card
            animateCounter('eczemaScore', patient.eczema.scorad);
            document.getElementById('eczemaDetails').textContent = `Lesion area: ${patient.eczema.lesion_area} • Intensity: ${patient.eczema.intensity} • Symptoms: ${patient.eczema.symptoms}`;
            updateProgressAndStatus('eczemaProgress', patient.eczema.scorad, 'eczemaStatus', patient.eczema.severity);

            // Depression Card
            animateCounter('depressionScore', patient.mental_health.phq9);
            document.getElementById('depressionDetails').textContent = `Sleep quality: ${patient.mental_health.sleep_quality} • Mood: ${patient.mental_health.mood} • Social withdrawal: ${patient.mental_health.social_withdrawal}`;
            updateProgressAndStatus('depressionProgress', patient.mental_health.phq9, 'depressionStatus', patient.mental_health.depression_risk);

            // Quality of Life Card
            animateCounter('qolScore', patient.qol.dlqi);
            document.getElementById('qolDetails').textContent = `Work productivity: ${patient.qol.work_productivity} • Social activities: ${patient.qol.social_activities} • Self-esteem: ${patient.qol.self_esteem}`;
            // QoL score is inverse (lower is better, so progress is 100 - score)
            updateProgressAndStatus('qolProgress', 100 - patient.qol.dlqi, 'qolStatus', patient.qol.status);
            
            // AI Insights
            document.getElementById('aiInsight1').textContent = `Strong correlation detected between skin flare severity and depressive symptoms (r=${patient.correlations[0]}). Patient shows high likelihood of depression episode.`;
            document.getElementById('aiInsight2').textContent = `Consider adjusting topical corticosteroid potency and introducing stress management techniques. Recommend mental health consultation.`;
            document.getElementById('aiInsight3').textContent = `Based on patient history and current trends, condition may worsen without intervention. Early psychological support recommended.`;

            // Correlations
            document.getElementById('corrEczemaDepression').textContent = patient.correlations[0].toFixed(2);
            document.getElementById('corrSleepSkin').textContent = patient.correlations[1].toFixed(2);
            document.getElementById('corrStressFlare').textContent = patient.correlations[2].toFixed(2);

            initDoctorCorrelationChart(patient);
        }

        /**
         * Updates the metrics and status indicators on the psychiatrist's dashboard
         * based on the currently selected patient.
         */
        function updatePsychiatristDashboardDisplay(patient) {
            if (!patient) return;

            // Depression Card
            animateCounter('psychDepressionScore', patient.mental_health.phq9);
            document.getElementById('psychDepressionDetails').textContent = `Sleep quality: ${patient.mental_health.sleep_quality} • Mood: ${patient.mental_health.mood} • Social withdrawal: ${patient.mental_health.social_withdrawal}`;
            updateProgressAndStatus('psychDepressionProgress', patient.mental_health.phq9, 'psychDepressionStatus', patient.mental_health.depression_risk);

            // Sleep Quality Card (using PHQ-9 as a proxy for now, or add specific sleep data)
            // For demo, let's use a proxy based on PHQ-9 for sleep score
            const sleepScore = 100 - patient.mental_health.phq9; // Higher PHQ-9, lower sleep score
            animateCounter('psychSleepScore', sleepScore);
            document.getElementById('psychSleepDetails').textContent = `Last 7 days average.`;
            updateProgressAndStatus('psychSleepProgress', sleepScore, 'psychSleepStatus', patient.mental_health.sleep_quality);

            // Mood Stability Card (using PHQ-9 as a proxy for now, or add specific mood data)
            const moodScore = 100 - patient.mental_health.phq9; // Higher PHQ-9, lower mood stability
            animateCounter('psychMoodScore', moodScore);
            document.getElementById('psychMoodDetails').textContent = `Based on daily mood logs.`;
            updateProgressAndStatus('psychMoodProgress', moodScore, 'psychMoodStatus', patient.mental_health.mood);

            initPsychTrendsChart(patient);
        }

        /**
         * Updates the metrics and status indicators on the patient's dashboard.
         * @param {object} patient - The patient data object.
         */
        function updatePatientDashboardDisplay(patient) {
            if (!patient) return;

            document.getElementById('patientDashboardName').textContent = patient.name;

            // Eczema Severity
            animateCounter('patientEczemaScore', patient.eczema.scorad);
            document.getElementById('patientEczemaDetails').textContent = `Your last recorded flare-up was ${patient.history[patient.history.length - 1].date}.`;
            updatePatientStatusIndicator('patientEczemaStatus', patient.eczema.scorad, 'eczema');

            // Mood Status
            animateCounter('patientMoodScore', patient.mental_health.phq9);
            document.getElementById('patientMoodDetails').textContent = `Remember to log your mood daily for better insights.`;
            updatePatientStatusIndicator('patientMoodStatus', patient.mental_health.phq9, 'mood');

            // Latest Doctor's Note
            const latestDoctorNote = patient.messages.find(m => m.to === 'patient' && (m.from === 'dermatologist' || m.from === 'psychiatrist'));
            document.getElementById('patientDoctorNote').textContent = latestDoctorNote ? `"${latestDoctorNote.content}" - ${latestDoctorNote.timestamp}` : "No recent notes.";

            initPatientHistoryChart(patient);
            displayPatientMessages(patient);
        }

        /**
         * Helper function to update progress bar and status indicator.
         * @param {string} progressId - ID of the progress bar element.
         * @param {number} value - The value for the progress bar (0-100).
         * @param {string} statusId - ID of the status indicator element.
         * @param {string} statusText - The text to display in the status indicator.
         */
        function updateProgressAndStatus(progressId, value, statusId, statusText) {
            const progressFill = document.getElementById(progressId);
            const statusIndicator = document.getElementById(statusId);

            if (progressFill) {
                progressFill.style.width = value + '%';
                let bgColor = '#00b894'; // Default to green (low/good)
                if (value > 70) bgColor = '#ff7675'; // Red (high/bad)
                else if (value > 40) bgColor = '#fdcb6e'; // Yellow (moderate)
                progressFill.style.background = bgColor;
            }

            if (statusIndicator) {
                statusIndicator.textContent = statusText;
                statusIndicator.className = 'status-indicator'; // Reset classes
                if (statusText.includes('High') || statusText.includes('Severe') || statusText.includes('Very Poor') || statusText.includes('Severely Impacted') || statusText.includes('Declining')) {
                    statusIndicator.classList.add('status-high');
                } else if (statusText.includes('Moderate') || statusText.includes('Impacted') || statusText.includes('Fair') || statusText.includes('Variable')) {
                    statusIndicator.classList.add('status-moderate');
                } else {
                    statusIndicator.classList.add('status-low');
                }
            }
        }

        /**
         * Specific helper for patient dashboard status indicators.
         * @param {string} statusId - ID of the status indicator element.
         * @param {number} score - The score (SCORAD or PHQ-9).
         * @param {string} type - 'eczema' or 'mood'.
         */
        function updatePatientStatusIndicator(statusId, score, type) {
            const statusIndicator = document.getElementById(statusId);
            if (!statusIndicator) return;

            statusIndicator.className = 'status-indicator'; // Reset classes
            if (type === 'eczema') {
                if (score < 30) {
                    statusIndicator.classList.add('status-low');
                    statusIndicator.textContent = 'Mild';
                } else if (score < 60) {
                    statusIndicator.classList.add('status-moderate');
                    statusIndicator.textContent = 'Moderate';
                } else {
                    statusIndicator.classList.add('status-high');
                    statusIndicator.textContent = 'Severe';
                }
            } else if (type === 'mood') { // For PHQ-9 score
                if (score < 40) {
                    statusIndicator.classList.add('status-low');
                    statusIndicator.textContent = 'Low Risk';
                } else if (score < 70) {
                    statusIndicator.classList.add('status-moderate');
                    statusIndicator.textContent = 'Moderate Risk';
                } else {
                    statusIndicator.classList.add('status-high');
                    statusIndicator.textContent = 'High Risk';
                }
            }
        }

        /**
         * Animates a numerical counter from its current value to a target value.
         * @param {string} elementId - The ID of the HTML element to animate.
         * @param {number} targetValue - The final value for the counter.
         */
        function animateCounter(elementId, targetValue) {
            const element = document.getElementById(elementId);
            if (!element) return;

            const startValue = parseInt(element.textContent || '0');
            const duration = 800; // Slightly faster animation
            const startTime = performance.now();
            
            function updateCounter(currentTime) {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / duration, 1);
                const currentValue = Math.round(startValue + (targetValue - startValue) * progress);
                element.textContent = currentValue;
                
                if (progress < 1) {
                    requestAnimationFrame(updateCounter);
                }
            }
            requestAnimationFrame(updateCounter);
        }

        /**
         * Displays a temporary floating notification at the top right of the screen.
         * @param {string} message - The message to display in the notification.
         */
        function showNotification(message) {
            const notification = document.getElementById('notification');
            const notificationText = document.getElementById('notificationText');
            
            notificationText.textContent = message;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        /**
         * Simulates refreshing the AI correlation analysis.
         */
        function refreshCorrelation() {
            showNotification('Refreshing AI correlation analysis...');
            
            // Simulate analysis delay
            setTimeout(() => {
                const patient = allPatientsData.find(p => p.id === currentPatientId);
                if (patient) {
                    // Generate slightly new values within a reasonable range
                    patient.correlations[0] = Math.max(0.1, Math.min(0.99, patient.correlations[0] + (Math.random() - 0.5) * 0.05));
                    patient.correlations[1] = Math.max(0.1, Math.min(0.99, patient.correlations[1] + (Math.random() - 0.5) * 0.05));
                    patient.correlations[2] = Math.max(0.1, Math.min(0.99, patient.correlations[2] + (Math.random() - 0.5) * 0.05));

                    document.getElementById('corrEczemaDepression').textContent = patient.correlations[0].toFixed(2);
                    document.getElementById('corrSleepSkin').textContent = patient.correlations[1].toFixed(2);
                    document.getElementById('corrStressFlare').textContent = patient.correlations[2].toFixed(2);
                    initDoctorCorrelationChart(patient); // Re-render chart with new data
                }
                showNotification('Correlation analysis updated!');
            }, 1500);
        }

        /**
         * Simulates scheduling an intervention.
         */
        function scheduleIntervention() {
            showCustomAlert('Intervention scheduled successfully! Mental health consultation booked for next week.');
        }

        /**
         * Simulates generating a comprehensive report.
         */
        function generateReport() {
            showCustomAlert('Comprehensive psychodermatological report generated and sent to your email.');
        }

        /**
         * Simulates contacting mental health services.
         */
        function referMentalHealth() {
            showCustomAlert('Mental health referral initiated. Patient will receive appointment details within 24 hours.');
        }

        /**
         * Initializes the correlation chart for the doctor's dashboard.
         * @param {object} patient - The current patient data.
         */
        function initDoctorCorrelationChart(patient) {
            const ctx = document.getElementById('doctorCorrelationChart').getContext('2d');
            if (doctorCorrelationChartInstance) {
                doctorCorrelationChartInstance.destroy();
            }
            doctorCorrelationChartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: patient.history.map(h => h.date),
                    datasets: [
                        {
                            label: 'Eczema Severity (SCORAD)',
                            data: patient.history.map(h => h.eczema_severity),
                            borderColor: '#667eea',
                            backgroundColor: 'rgba(102, 126, 234, 0.2)',
                            fill: true,
                            tension: 0.3,
                            pointBackgroundColor: '#667eea',
                            pointBorderColor: '#fff',
                            pointRadius: 5,
                            pointHoverRadius: 7
                        },
                        {
                            label: 'Depression Score (PHQ-9)',
                            data: patient.history.map(h => h.depression_score),
                            borderColor: '#ff7675',
                            backgroundColor: 'rgba(255, 118, 117, 0.2)',
                            fill: true,
                            tension: 0.3,
                            pointBackgroundColor: '#ff7675',
                            pointBorderColor: '#fff',
                            pointRadius: 5,
                            pointHoverRadius: 7
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Score'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Date'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top'
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false
                        }
                    }
                }
            });
        }

        /**
         * Initializes the trend chart for the psychiatrist's dashboard.
         * @param {object} patient - The current patient data.
         */
        function initPsychTrendsChart(patient) {
            const ctx = document.getElementById('psychTrendsChart').getContext('2d');
            if (psychTrendsChartInstance) {
                psychTrendsChartInstance.destroy();
            }
            psychTrendsChartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: patient.history.map(h => h.date),
                    datasets: [
                        {
                            label: 'Depression Score (PHQ-9)',
                            data: patient.history.map(h => h.depression_score),
                            borderColor: '#764ba2',
                            backgroundColor: 'rgba(118, 75, 162, 0.2)',
                            fill: true,
                            tension: 0.3,
                            pointBackgroundColor: '#764ba2',
                            pointBorderColor: '#fff',
                            pointRadius: 5,
                            pointHoverRadius: 7
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'PHQ-9 Score'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Date'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top'
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false
                        }
                    }
                }
            });
        }

        /**
         * Initializes the history chart for the patient's dashboard.
         * @param {object} patient - The current patient data.
         */
        function initPatientHistoryChart(patient) {
            const ctx = document.getElementById('patientHistoryChart').getContext('2d');
            if (patientHistoryChartInstance) {
                patientHistoryChartInstance.destroy();
            }
            patientHistoryChartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: patient.history.map(h => h.date),
                    datasets: [
                        {
                            label: 'Eczema Severity',
                            data: patient.history.map(h => h.eczema_severity),
                            borderColor: '#667eea',
                            backgroundColor: 'rgba(102, 126, 234, 0.2)',
                            fill: true,
                            tension: 0.3,
                            pointBackgroundColor: '#667eea',
                            pointBorderColor: '#fff',
                            pointRadius: 5,
                            pointHoverRadius: 7
                        },
                        {
                            label: 'Depression Score',
                            data: patient.history.map(h => h.depression_score),
                            borderColor: '#ff7675',
                            backgroundColor: 'rgba(255, 118, 117, 0.2)',
                            fill: true,
                            tension: 0.3,
                            pointBackgroundColor: '#ff7675',
                            pointBorderColor: '#fff',
                            pointRadius: 5,
                            pointHoverRadius: 7
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Score'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Date'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top'
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false
                        }
                    }
                }
            });
        }

        /**
         * Populates the patients table in the Patients View.
         */
        function populatePatientsTable() {
            const tableBody = document.getElementById('patientsTableBody');
            tableBody.innerHTML = ''; // Clear existing rows

            allPatientsData.forEach(patient => {
                const row = document.createElement('tr');
                row.className = 'hover:bg-gray-50 cursor-pointer';
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap text-gray-800">${patient.name}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-gray-800">${patient.eczema.severity} (SCORAD: ${patient.eczema.scorad})</td>
                    <td class="px-6 py-4 whitespace-nowrap text-gray-800">${patient.mental_health.depression_risk} (PHQ-9: ${patient.mental_health.phq9})</td>
                    <td class="px-6 py-4 whitespace-nowrap text-gray-800">${patient.history[patient.history.length - 1].date}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                        <button onclick="selectPatient(this.closest('tr'), '${patient.id}', loggedInUserRole === 'dermatologist' ? 'doctor' : 'psychiatrist'); switchView(loggedInUserRole === 'dermatologist' ? 'doctor-dashboard-view' : 'psychiatrist-dashboard-view', document.querySelector('#navMenu .nav-item.active'), loggedInUserRole);" class="text-indigo-600 hover:text-indigo-900 mr-2">View</button>
                        <button onclick="showCustomAlert('Messaging ${patient.name}...');" class="text-blue-600 hover:text-blue-900">Message</button>
                    </td>
                `;
                tableBody.appendChild(row);
            });
        }

        /**
         * Filters the patients table by name.
         * @param {string} searchTerm - The text to search for.
         */
        function filterPatientsByName(searchTerm) {
            const rows = document.querySelectorAll('#patientsTableBody tr');
            rows.forEach(row => {
                const name = row.children[0].textContent.toLowerCase();
                if (name.includes(searchTerm.toLowerCase()) || searchTerm === '') {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
        }

        /**
         * Filters the patients table by eczema severity.
         */
        function filterPatientsBySeverity() {
            const filter = document.getElementById('patientsViewEczemaFilter').value;
            const rows = document.querySelectorAll('#patientsTableBody tr');
            rows.forEach(row => {
                const severity = row.children[1].textContent.split(' ')[0]; // "Moderate (SCORAD: 42)" -> "Moderate"
                if (!filter || severity === filter) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
        }

        /**
         * Initializes the overall analytics chart.
         */
        function initAnalyticsOverviewChart() {
            const ctx = document.getElementById('analyticsOverviewChart').getContext('2d');
            if (analyticsOverviewChartInstance) {
                analyticsOverviewChartInstance.destroy();
            }

            const eczemaScores = allPatientsData.map(p => p.eczema.scorad);
            const depressionScores = allPatientsData.map(p => p.mental_health.phq9);

            const avgEczema = (eczemaScores.reduce((a, b) => a + b, 0) / eczemaScores.length).toFixed(1);
            const avgDepression = (depressionScores.reduce((a, b) => a + b, 0) / depressionScores.length).toFixed(1);

            document.getElementById('totalPatientsCount').textContent = allPatientsData.length;
            document.getElementById('avgEczemaSeverity').textContent = avgEczema;
            document.getElementById('avgDepressionRisk').textContent = avgDepression;

            analyticsOverviewChartInstance = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: allPatientsData.map(p => p.name),
                    datasets: [
                        {
                            label: 'Eczema SCORAD',
                            data: eczemaScores,
                            backgroundColor: 'rgba(102, 126, 234, 0.7)',
                            borderColor: 'rgba(102, 126, 234, 1)',
                            borderWidth: 1,
                            borderRadius: 5
                        },
                        {
                            label: 'Depression PHQ-9',
                            data: depressionScores,
                            backgroundColor: 'rgba(255, 118, 117, 0.7)',
                            borderColor: 'rgba(255, 118, 117, 1)',
                            borderWidth: 1,
                            borderRadius: 5
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Score'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Patient'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top'
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false
                        }
                    }
                }
            });
        }

        /**
         * Populates the patient dropdowns for report generation.
         */
        function populateReportDropdowns() {
            const selectElement = document.getElementById('reportPatientSelect');
            selectElement.innerHTML = '<option value="">Select Patient</option>'; // Clear existing options
            allPatientsData.forEach(p => {
                const option = document.createElement('option');
                option.value = p.id;
                option.textContent = p.name;
                selectElement.appendChild(option);
            });
        }

        /**
         * Generates a combined report for a selected patient.
         */
        function generateCombinedReport() {
            const patientId = document.getElementById('reportPatientSelect').value;
            const reportType = document.getElementById('reportTypeSelect').value;

            if (!patientId) {
                showCustomAlert('Please select a patient to generate a report.');
                return;
            }

            const patient = allPatientsData.find(p => p.id === patientId);
            let reportMessage = `Report for ${patient.name} - Date: ${new Date().toLocaleString()}\n\n`;

            if (reportType === 'dermatologist') {
                reportMessage += `--- Dermatologist Report ---\n`;
                reportMessage += `Severity: ${patient.eczema.severity}\n`;
                reportMessage += `SCORAD: ${patient.eczema.scorad}\n`;
                reportMessage += `Lesion Area: ${patient.eczema.lesion_area}\n`;
                reportMessage += `Treatment: ${patient.eczema.treatment}\n`;
                reportMessage += `Adherence: ${patient.eczema.adherence}\n`;
            } else if (reportType === 'psychiatrist') {
                reportMessage += `--- Psychiatrist Report ---\n`;
                reportMessage += `Depression Risk: ${patient.mental_health.depression_risk}\n`;
                reportMessage += `PHQ-9: ${patient.mental_health.phq9}\n`;
                reportMessage += `Mood: ${patient.mental_health.mood}\n`;
                reportMessage += `Sleep Quality: ${patient.mental_health.sleep_quality}\n`;
            }
            showCustomAlert(reportMessage);
        }

        /**
         * Displays patient messages in the patient messages view.
         * @param {object} patient - The patient data object.
         */
        function displayPatientMessages(patient) {
            const messagesDiv = document.getElementById('pastPatientMessages');
            messagesDiv.innerHTML = ''; // Clear existing messages

            if (patient.messages.length === 0) {
                messagesDiv.innerHTML = '<p class="text-gray-700">No past messages.</p>';
                return;
            }

            patient.messages.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp)); // Sort by date, newest first

            patient.messages.forEach(msg => {
                const messageElement = document.createElement('div');
                messageElement.className = 'bg-gray-100 p-3 rounded-lg mb-2';
                messageElement.innerHTML = `
                    <p class="font-medium text-gray-900">${msg.from.charAt(0).toUpperCase() + msg.from.slice(1)} to ${msg.to.charAt(0).toUpperCase() + msg.to.slice(1)} (${msg.timestamp})</p>
                    <p class="text-gray-700">${msg.content}</p>
                `;
                messagesDiv.appendChild(messageElement);
            });
        }

        /**
         * Sends a message from the patient dashboard.
         */
        function sendPatientMessage() {
            const doctorType = document.getElementById('patientMessageDoctorType').value;
            const messageContent = document.getElementById('patientMessageContent').value;

            if (!messageContent.trim()) {
                showCustomAlert('Message cannot be empty.');
                return;
            }

            const patient = allPatientsData.find(p => p.id === currentPatientId);
            if (patient) {
                patient.messages.push({
                    from: 'patient',
                    to: doctorType,
                    content: messageContent,
                    timestamp: new Date().toISOString().slice(0, 10) //YYYY-MM-DD
                });
                showCustomAlert(`Message sent to ${doctorType}!`);
                document.getElementById('patientMessageContent').value = ''; // Clear textarea
                displayPatientMessages(patient); // Refresh messages
            }
        }

        // Initialize demo: ensure landing page is visible on load
        document.addEventListener('DOMContentLoaded', function() {
            showLandingPage(); // Start with the landing page
            // Simulate real-time updates only if a user is logged in
            setInterval(() => {
                if (loggedInUserRole) { // Only show notifications if logged in
                    if (Math.random() > 0.7) {
                        const messages = [
                            'New correlation pattern detected!',
                            'Patient mood data updated',
                            'Skin condition analysis complete',
                            'Predictive model refreshed'
                        ];
                        const randomMessage = messages[Math.floor(Math.random() * messages.length)];
                        showNotification(randomMessage);
                    }
                }
            }, 15000);
        });
    </script>
</body>
</html>
